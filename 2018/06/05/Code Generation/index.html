<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    
    <title>Code Generation | Renko&#39;s blog | 人生如逆旅，我亦是行人</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="工具">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.1.2">
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":true,"app_id":"BG0bK4DLNxackBrBBd7M3TOI-gzGzoHsz","app_key":"ji1U1fUbF7iiD8xufT3rvonA","icon":true}'),
            v: JSON.parse('{"enable":true,"appid":"BG0bK4DLNxackBrBBd7M3TOI-gzGzoHsz","appkey":"ji1U1fUbF7iiD8xufT3rvonA","notify":false,"verify":true,"placeholder":"欢迎留言...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
</head>


<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Renko</h5>
          <a href="mailto:fqx2@outlook.com" title="fqx2@outlook.com" class="mail">fqx2@outlook.com</a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://github.com/RenkoQ" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                关于
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/friend"  >
                <i class="icon icon-lg icon-group"></i>
                友链
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://sunnyfu.cn"  >
                <i class="icon icon-lg icon-anchor"></i>
                简历
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>Code Generation</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header" style="background-image: url(img/banner.jpg)">
    <div class="container fade-scale">
        <h1 class="title">Code Generation</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-06-05T05:34:30.000Z" itemprop="datePublished" class="page-time">
  2018-06-05
</time>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-Code Generation"
  class="post-article article-type-post fade" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">Code Generation</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-06-05 13:34:30" datetime="2018-06-05T05:34:30.000Z"  itemprop="datePublished">2018-06-05</time>

            


            
	<span id="/2018/06/05/Code Generation/" class="leancloud_visitors" data-flag-title="Code Generation" title="Code Generation">
		
			<i class="icon icon-eye"></i>
		
		<span class="leancloud-visitors-count"></span>
	</span>
 

            
    <span>
        <i class="icon icon-comment-o"></i>
        <a href="/2018/06/05/Code Generation/#comment">
            <span class="valine-comment-count" data-xid="/2018/06/05/Code Generation/"></span>
        </a>
    </span>


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h3 id="1-javapoet"><a href="#1-javapoet" class="headerlink" title="1. javapoet"></a>1. javapoet</h3><p><a href="https://github.com/square/javapoet" target="_blank" rel="noopener">https://github.com/square/javapoet</a></p>
<pre><code>开源java代码生成框架，提供Java Api生成.java源文件。
可以很方便的使用它根据注解、数据库模式、协议格式等来对应生成代码。
</code></pre><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">generateHelloworld</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        MethodSpec main = MethodSpec.methodBuilder(<span class="string">"main"</span>)</span><br><span class="line">        <span class="comment">//main代表方法名</span></span><br><span class="line">                .addModifiers(Modifier.PUBLIC,Modifier.STATIC)</span><br><span class="line">                    <span class="comment">//Modifier 修饰的关键字</span></span><br><span class="line">                .addParameter(String[].class, <span class="string">"args"</span>)</span><br><span class="line">                <span class="comment">//添加string[]类型的名为args的参数</span></span><br><span class="line">                .addStatement(<span class="string">"$T.out.println($S)"</span>, System.class,<span class="string">"Hello World"</span>)</span><br><span class="line">                    <span class="comment">//添加代码，这里$T和$S后面会讲，这里其实就是添加了System,out.println("Hello World");</span></span><br><span class="line">                .build();</span><br><span class="line">                TypeSpec typeSpec = TypeSpec.classBuilder(<span class="string">"HelloWorld"</span>)</span><br><span class="line">                <span class="comment">//HelloWorld是类名</span></span><br><span class="line">                .addModifiers(Modifier.FINAL,Modifier.PUBLIC)</span><br><span class="line">                .addMethod(main)  </span><br><span class="line">                <span class="comment">//在类中添加方法</span></span><br><span class="line">                .build();</span><br><span class="line">        JavaFile javaFile = JavaFile.builder(<span class="string">"com.example.helloworld"</span>, typeSpec)</span><br><span class="line">                .build();</span><br><span class="line">        javaFile.writeTo(System.out);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">作者：尸情化异</span><br><span class="line">链接：https:<span class="comment">//www.jianshu.com/p/95f12f72f69a</span></span><br><span class="line">來源：简书</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>
<h4 id="调用JavaPoet的API生成"><a href="#调用JavaPoet的API生成" class="headerlink" title="调用JavaPoet的API生成"></a>调用JavaPoet的API生成</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.helloworld;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"Hello, JavaPoet!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="2-RGen元模型生成器"><a href="#2-RGen元模型生成器" class="headerlink" title="2. RGen元模型生成器"></a>2. RGen元模型生成器</h3><pre><code>Ruby Modelling and Generator Framework
</code></pre><p><a href="http://ruby-gen.org/documentation" target="_blank" rel="noopener">Documentation</a><br><a href="http://www.infoq.com/cn/articles/thiede-ruby-modelling" target="_blank" rel="noopener">介绍</a></p>
<p><img src="https://res.infoq.com/articles/thiede-ruby-modelling/en/resources/model_and_metamodel.png" alt="此处输入图片的描述"></p>
<p>对象用来表示模型元素，类用来表示元模型元素。</p>
<h4 id="RGen生成器模板"><a href="#RGen生成器模板" class="headerlink" title="RGen生成器模板"></a>RGen生成器模板</h4><p><img src="https://res.infoq.com/articles/thiede-ruby-modelling/en/resources/template_language.png" alt="此处输入图片的描述"></p>
<h4 id="状态机生成器模板例子"><a href="#状态机生成器模板例子" class="headerlink" title="状态机生成器模板例子"></a>状态机生成器模板例子</h4><p>它用来产生一个为每个复合状态创建的C++抽象类的头文件。跟随着状态模式和，能够从这个类得到每个子状态的状态类。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">define</span> '<span class="attr">Header</span>', <span class="attr">:for</span> =&gt;</span> CompositeState do %&gt;         # (1)</span><br><span class="line">  <span class="tag">&lt;<span class="name">%</span> <span class="attr">file</span> <span class="attr">abstractSubstateClassName</span>+"<span class="attr">.h</span>" <span class="attr">do</span> %&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">%</span> <span class="attr">expand</span> '/<span class="attr">Util::IfdefHeader</span>', <span class="attr">abstractSubstateClassName</span> %&gt;</span> # (2)</span><br><span class="line">    class <span class="tag">&lt;<span class="name">%=</span> <span class="attr">stateClassName</span> %&gt;</span>;</span><br><span class="line">    <span class="tag">&lt;<span class="name">%nl%</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    class <span class="tag">&lt;<span class="name">%=</span> <span class="attr">abstractSubstateClassName</span> %&gt;</span>               # (3)</span><br><span class="line">    &#123;</span><br><span class="line">    public:<span class="tag">&lt;<span class="name">%iinc%</span>&gt;</span>                                      # (4)</span><br><span class="line">      <span class="tag">&lt;<span class="name">%=abstractSubstateClassName%</span>&gt;</span>(<span class="tag">&lt;<span class="name">%=stateClassName%</span>&gt;</span> &amp;cont, char* name);</span><br><span class="line">      virtual ~<span class="tag">&lt;<span class="name">%=</span> <span class="attr">abstractSubstateClassName</span> %&gt;</span>() &#123;&#125;;</span><br><span class="line">      <span class="tag">&lt;<span class="name">%nl%</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">%=</span> <span class="attr">stateClassName</span> %&gt;</span> &amp;getContext() &#123;<span class="tag">&lt;<span class="name">%iinc%</span>&gt;</span></span><br><span class="line">        return fContext;<span class="tag">&lt;<span class="name">%idec%</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">%nl%</span>&gt;</span></span><br><span class="line">      char *getName() &#123; return fName; &#125;;</span><br><span class="line">      <span class="tag">&lt;<span class="name">%nl%</span>&gt;</span></span><br><span class="line">      virtual void entryAction() &#123;&#125;;</span><br><span class="line">      virtual void exitAction() &#123;&#125;;</span><br><span class="line">      <span class="tag">&lt;<span class="name">%nl%</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">%</span> <span class="attr">for</span> <span class="attr">t</span> <span class="attr">in</span> (<span class="attr">outgoingTransitions</span> + <span class="attr">allSubstateTransitions</span>)<span class="attr">.trigger</span> %&gt;</span> # (5)</span><br><span class="line">        virtual void <span class="tag">&lt;<span class="name">%=</span> <span class="attr">t</span> %&gt;</span>() &#123;&#125;;</span><br><span class="line">      <span class="tag">&lt;<span class="name">%</span> <span class="attr">end</span> %&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">%nl%</span>&gt;</span><span class="tag">&lt;<span class="name">%idec%</span>&gt;</span></span><br><span class="line">    private:<span class="tag">&lt;<span class="name">%iinc%</span>&gt;</span></span><br><span class="line">      char* fName;  </span><br><span class="line">      <span class="tag">&lt;<span class="name">%=</span> <span class="attr">stateClassName</span> %&gt;</span> &amp;fContext;<span class="tag">&lt;<span class="name">%idec%</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="tag">&lt;<span class="name">%</span> <span class="attr">expand</span> '/<span class="attr">Util::IfdefFooter</span>', <span class="attr">abstractSubstateClassName</span> %&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">%</span> <span class="attr">end</span> %&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">end</span> %&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Listing 11: Example C++ output file "AbstractOperatingSubstate.h"</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> ABSTRACTOPERATINGSUBSTATE_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ABSTRACTOPERATINGSUBSTATE_H_</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OperatingState</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AbstractOperatingSubstate</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">   AbstractOperatingSubstate(OperatingState &amp;context, <span class="keyword">char</span>* name);</span><br><span class="line">   <span class="keyword">virtual</span> ~AbstractOperatingSubstate() &#123;&#125;;</span><br><span class="line"></span><br><span class="line">   <span class="function">OperatingState &amp;<span class="title">getContext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> fContext;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">char</span> *<span class="title">getName</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> fName; &#125;;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">entryAction</span><span class="params">()</span> </span>&#123;&#125;;</span><br><span class="line">   <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">exitAction</span><span class="params">()</span> </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">powerBut</span><span class="params">()</span> </span>&#123;&#125;;</span><br><span class="line">   <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">modeBut</span><span class="params">()</span> </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">   <span class="keyword">char</span>* fName;</span><br><span class="line">   OperatingState &amp;fContext;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* ABSTRACTOPERATINGSUBSTATE_H_ */</span></span></span><br></pre></td></tr></table></figure>
<h3 id="3-Jet-Model-Robotization"><a href="#3-Jet-Model-Robotization" class="headerlink" title="3. Jet Model Robotization"></a>3. Jet Model Robotization</h3><p>Jmr使用Jet模板生成代码。Jet是Eclipse开源的模板引擎</p>
<h4 id="Java-Emitter-Templates"><a href="#Java-Emitter-Templates" class="headerlink" title="Java Emitter Templates"></a><a href="https://www.eclipse.org/modeling/m2t/?project=jet" target="_blank" rel="noopener">Java Emitter Templates</a></h4><pre><code>随着模型驱动开发（MDD）的发展而普及开来。Eclipse 项目有一个称为 JET 的技术项目就是一个专门的代码生成器。

参数 + 蓝图 = 所需的工件
</code></pre><p><a href="https://www.ibm.com/developerworks/cn/opensource/os-ecl-jet/" target="_blank" rel="noopener">使用 JET 在 Eclipse 中创建更多更好的代码</a></p>
<h5 id="属性模板"><a href="#属性模板" class="headerlink" title="属性模板"></a>属性模板</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">class <span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">"/app/@class"</span> /&gt;</span> &#123;</span><br><span class="line"><span class="tag">&lt;<span class="name">c:iterate</span> <span class="attr">select</span>=<span class="string">"/app/property"</span> <span class="attr">var</span>=<span class="string">"p"</span> &gt;</span></span><br><span class="line">    private <span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">"$p/@type"</span> /&gt;</span> <span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">"$p/@name"</span> /&gt;</span>;</span><br><span class="line"><span class="tag">&lt;/<span class="name">c:iterate</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    public <span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">"/app/@class"</span> /&gt;</span>() &#123;</span><br><span class="line">    <span class="tag">&lt;<span class="name">c:iterate</span> <span class="attr">select</span>=<span class="string">"/app/property"</span> <span class="attr">var</span>=<span class="string">"p"</span> &gt;</span></span><br><span class="line">        this.<span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">"$p/@name"</span> /&gt;</span> = <span class="tag">&lt;<span class="name">c:choose</span> <span class="attr">select</span>=<span class="string">"$p/@type"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">"'String'"</span>&gt;</span>"<span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">"$p/@initial"</span> /&gt;</span>"<span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">c:otherwise</span>&gt;</span><span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">"$p/@initial"</span> /&gt;</span><span class="tag">&lt;/<span class="name">c:otherwise</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">c:choose</span>&gt;</span></span><br><span class="line">;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">c:iterate</span>&gt;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">c:iterate</span> <span class="attr">select</span>=<span class="string">"/app/property"</span> <span class="attr">var</span>=<span class="string">"p"</span> &gt;</span></span><br><span class="line">    public void set<span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">\</span></span></span><br><span class="line"><span class="tag">    "<span class="attr">camelCase</span>($<span class="attr">p</span>/@<span class="attr">name</span>)" /&gt;</span>(<span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">"$p/@type"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">"$p/@name"</span> /&gt;</span>) &#123;</span><br><span class="line">        System.out.println\</span><br><span class="line">        ("In set<span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">\</span></span></span><br><span class="line"><span class="tag">        "<span class="attr">camelCase</span>($<span class="attr">p</span>/@<span class="attr">name</span>)" /&gt;</span>()");</span><br><span class="line">        this.<span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">"$p/@name"</span> /&gt;</span> = <span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">"$p/@name"</span> /&gt;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public <span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">\</span></span></span><br><span class="line"><span class="tag">    "$<span class="attr">p</span>/@<span class="attr">type</span>" /&gt;</span> get<span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">"camelCase($p/@name)"</span> /&gt;</span>() &#123;</span><br><span class="line">        System.out.println("In get<span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">"camelCase($p/@name)"</span> /&gt;</span>()");</span><br><span class="line">        return <span class="tag">&lt;<span class="name">c:get</span> <span class="attr">select</span>=<span class="string">"$p/@name"</span> /&gt;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">c:iterate</span>&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="输入参数"><a href="#输入参数" class="headerlink" title="输入参数"></a>输入参数</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">app</span> <span class="attr">class</span>=<span class="string">"Car"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"model"</span> <span class="attr">type</span>=<span class="string">"String"</span> <span class="attr">initial</span>=<span class="string">"Honda Accord"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"horsepower"</span> <span class="attr">type</span>=<span class="string">"int"</span> <span class="attr">initial</span>=<span class="string">"140"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"spareTires"</span> <span class="attr">type</span>=<span class="string">"boolean"</span> <span class="attr">initial</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="生成的类"><a href="#生成的类" class="headerlink" title="生成的类"></a>生成的类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String model;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> horsepower;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> spareTires;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Car</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.model = <span class="string">"Honda Accord"</span>;</span><br><span class="line">        <span class="keyword">this</span>.horsepower = <span class="number">140</span>;</span><br><span class="line">        <span class="keyword">this</span>.spareTires = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setModel</span><span class="params">(String model)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"In setModel()"</span>);</span><br><span class="line">        <span class="keyword">this</span>.model = model;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getModel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"In getModel()"</span>);</span><br><span class="line">        <span class="keyword">return</span> model;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHorsepower</span><span class="params">(<span class="keyword">int</span> horsepower)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"In setHorsepower()"</span>);</span><br><span class="line">        <span class="keyword">this</span>.horsepower = horsepower;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getHorsepower</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"In getHorsepower()"</span>);</span><br><span class="line">        <span class="keyword">return</span> horsepower;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSparetires</span><span class="params">(<span class="keyword">boolean</span> spareTires)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"In setSparetires()"</span>);</span><br><span class="line">        <span class="keyword">this</span>.spareTires = spareTires;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">getSparetires</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"In getSparetires()"</span>);</span><br><span class="line">        <span class="keyword">return</span> spareTires;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-AutoValue"><a href="#4-AutoValue" class="headerlink" title="4. AutoValue"></a>4. AutoValue</h3><pre><code>&quot;AutoValue is a great tool for eliminating the drudgery of writing mundane value classes in Java. It encapsulates much of the advice in Effective Java Chapter 2, and frees you to concentrate on the more interesting aspects of your program. The resulting program is likely to be shorter, clearer, and freer of bugs. Two thumbs up.&quot;
</code></pre><p>AutoValue的是Google为了实现ValueClass设计的自动编译框架。</p>
<p><a href="https://github.com/google/auto/blob/master/value/userguide/index.md" target="_blank" rel="noopener">userguide</a></p>
<p><a href="https://ryanharter.com/blog/2016/03/22/autovalue/" target="_blank" rel="noopener">An Introduction to AutoValue</a></p>
<h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">  apt &apos;com.google.auto.value:auto-value:1.2&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoValue</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Story</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">id</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">title</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Story <span class="title">create</span><span class="params">(<span class="keyword">int</span> id, String title)</span></span>&#123;</span><br><span class="line">    <span class="keyword">new</span> AutoValue_Story(id,title);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="输出-1"><a href="#输出-1" class="headerlink" title="输出"></a>输出</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Story</span></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">  <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Story</span><span class="params">(<span class="keyword">int</span> id, String title)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.id = id;</span><br><span class="line">    <span class="keyword">this</span>.title = title;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">id</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">title</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.title;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> id + title;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> hash = <span class="number">7</span>;</span><br><span class="line">    hash = <span class="number">31</span> * hash + <span class="keyword">this</span>.id;</span><br><span class="line">    hash = <span class="number">31</span> * hash + (<span class="keyword">null</span> == title ? <span class="number">0</span> : title.hashCode());</span><br><span class="line">    <span class="keyword">return</span> hash;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span> || !(o <span class="keyword">instanceof</span> Stroy)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    Story s = (Story) o;</span><br><span class="line">    <span class="keyword">if</span> (s.id != s.id) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">return</span> s.title.equals(s.title);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-Ruby-代码生成器"><a href="#5-Ruby-代码生成器" class="headerlink" title="5. Ruby 代码生成器"></a>5. Ruby 代码生成器</h3><p><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-ruby-codegenerator/index.html" target="_blank" rel="noopener">使用 Ruby 开发代码生成器</a></p>
<p><a href="http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html" target="_blank" rel="noopener">Class: ERB</a></p>
<p>ERB 是 Ruby 标准库的成员。</p>
<p>ERB 中使用<code>&lt;% %&gt;</code>在模板文件中嵌入 Ruby 代码，<code>&lt;% %&gt;</code> 中的 Ruby 代码用于指定代码生成中数据模型相关的信息，模板中的文本给出了模型无关的信息。<code>&lt;% %&gt;</code> 中用于给出一段 Ruby 代码， <code>&lt;%= %&gt;</code> 表示表达式求值的结果将被输出出来。</p>
<p><img src="https://www.ibm.com/developerworks/cn/opensource/os-cn-ruby-codegenerator/image003.png" alt="此处输入图片的描述"></p>
<p>ERB模板<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">* 项目名称：&lt;%=projectName%&gt;</span><br><span class="line">*</span><br><span class="line">* 创建日期 : &lt;%=date%&gt;</span><br><span class="line">*</span><br><span class="line">* <span class="number">1.0</span>.<span class="number">0</span> 版 （&lt;%=bean.author%&gt;）</span><br><span class="line">*<span class="regexp">/</span></span><br><span class="line"><span class="regexp">package com.&lt;%=projectPackage%&gt;.&lt;%=bean.package%&gt;.domain;</span></span><br><span class="line"><span class="regexp">&lt;%if(bean.hasDateType())%&gt;import java.util.Date;&lt;%end%&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">public class &lt;%=bean.domain%&gt;Domain  &#123;   </span></span><br><span class="line"><span class="regexp">&lt;% bean.properties.each do |p|%&gt;  </span></span><br><span class="line"><span class="regexp">    /</span>** &lt;%=p.desc%&gt; *<span class="regexp">/   </span></span><br><span class="line"><span class="regexp">    private &lt;%=p.getJavaType()%&gt; &lt;%=p.field%&gt;;     </span></span><br><span class="line"><span class="regexp">&lt;%end%&gt;  </span></span><br><span class="line"><span class="regexp">&lt;% bean.properties.each do |p|%&gt;  </span></span><br><span class="line"><span class="regexp">    /</span>**</span><br><span class="line">    * 获取 &lt;%=(p.desc)%&gt;</span><br><span class="line">    *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">    public &lt;%=p.getJavaType()%&gt; get&lt;%=p.upcaseField()%&gt;()&#123;</span></span><br><span class="line"><span class="regexp">        return this.&lt;%=p.field%&gt;;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    /</span>**</span><br><span class="line">    * 设置 &lt;%=(p.desc)%&gt;</span><br><span class="line">    *<span class="regexp">/</span></span><br><span class="line"><span class="regexp">    public void set&lt;%=p.upcaseField()%&gt;(&lt;%=p.getJavaType()%&gt; &lt;%=p.field%&gt;)&#123;</span></span><br><span class="line"><span class="regexp">        this.&lt;%=p.field%&gt; = &lt;%=p.field%&gt;;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&lt;%end%&gt;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>使用 USER 数据模型作为输入，调用上述模板，得到的输出:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 项目名称：XX 系统</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 创建日期 : 2011-12-08</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 1.0.0 版 （gaoshang）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> com.test.example.domain;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDomain</span> </span>&#123;  </span><br><span class="line">    <span class="comment">/** ID */</span>  </span><br><span class="line">    <span class="keyword">private</span> Integer id;    </span><br><span class="line">    <span class="comment">/** 姓名 */</span>  </span><br><span class="line">    <span class="keyword">private</span> String name;   </span><br><span class="line">    <span class="comment">/** 身份证号 */</span>    </span><br><span class="line">    <span class="keyword">private</span> String idcard;     </span><br><span class="line">    <span class="comment">/** 地址 */</span>  </span><br><span class="line">    <span class="keyword">private</span> String address;    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 获取 ID</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 设置 ID</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 获取 姓名</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 设置 姓名</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 获取 身份证号</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getIdcard</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.idcard;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 设置 身份证号</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIdcard</span><span class="params">(String idcard)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.idcard = idcard;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 获取 地址</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.address;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 设置 地址</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String address)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-CodeSmith"><a href="#6-CodeSmith" class="headerlink" title="6. CodeSmith"></a>6. CodeSmith</h3><p><a href="http://www.codesmithtools.com/" target="_blank" rel="noopener">官网</a></p>
<p>CodeSmith 是一种基于模板的代码生成工具，它使用类似于 ASP.NET的语法来生成任意类型的代码或文本。</p>
<p><img src="http://wiki.jikexueyuan.com/project/codesmith/images/8.png" alt="此处输入图片的描述"></p>
<p><a href="http://wiki.jikexueyuan.com/project/codesmith/first-code-template.html" target="_blank" rel="noopener">编写第一个代码模板</a></p>
<h3 id="7-Velocity"><a href="#7-Velocity" class="headerlink" title="7. Velocity"></a>7. Velocity</h3><p>Velocity是一个基于Java的模板引擎。它允许任何人使用简单而强大的模板语言来引用Java代码中定义的对象。</p>
<p>Velocity的功能远远超出了网络的范围; 例如，它可以用于从模板生成SQL，PostScript和XML。它可以用作生成源代码和报告的独立实用程序，也可以用作其他系统的集成组件。例如，Velocity为各种Web框架提供模板服务，使他们能够根据真正的MVC模型，使视图引擎促进Web应用程序的开发。</p>
<p><a href="https://velocity.apache.org/engine/devel/user-guide.html#what-is-velocity" target="_blank" rel="noopener">User Guide</a></p>
<p><a href="https://www.ibm.com/developerworks/cn/java/j-lo-velocity1/" target="_blank" rel="noopener">使用 Velocity 模板引擎快速生成代码</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HelloVelocity.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloVelocity</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"> VelocityEngine ve = <span class="keyword">new</span> VelocityEngine();</span><br><span class="line"> ve.setProperty(RuntimeConstants.RESOURCE_LOADER, <span class="string">"classpath"</span>);</span><br><span class="line"> ve.setProperty(<span class="string">"classpath.resource.loader.class"</span>, ClasspathResourceLoader.class.getName());</span><br><span class="line"></span><br><span class="line"> ve.init();</span><br><span class="line"></span><br><span class="line"> Template t = ve.getTemplate(<span class="string">"hellovelocity.vm"</span>);</span><br><span class="line"> VelocityContext ctx = <span class="keyword">new</span> VelocityContext();</span><br><span class="line"></span><br><span class="line"> ctx.put(<span class="string">"name"</span>, <span class="string">"velocity"</span>);</span><br><span class="line"> ctx.put(<span class="string">"date"</span>, (<span class="keyword">new</span> Date()).toString());</span><br><span class="line"></span><br><span class="line"> List temp = <span class="keyword">new</span> ArrayList();</span><br><span class="line"> temp.add(<span class="string">"1"</span>);</span><br><span class="line"> temp.add(<span class="string">"2"</span>);</span><br><span class="line"> ctx.put(<span class="string">"list"</span>, temp);</span><br><span class="line"></span><br><span class="line"> StringWriter sw = <span class="keyword">new</span> StringWriter();</span><br><span class="line"></span><br><span class="line"> t.merge(ctx, sw);</span><br><span class="line"></span><br><span class="line"> System.out.println(sw.toString());</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 HelloVelocity 的代码中，首先 new 了一个 VelocityEngine 类，这个类设置了 Velocity 使用的一些配置，在初始化引擎之后就可以读取 hellovelocity.vm 这个模板生成的 Template 这个类。之后的 VelocityContext 类是配置 Velocity 模板读取的内容。这个 context 可以存入任意类型的对象或者变量，让 template 来读取。这个操作就像是在使用 JSP 开发时，往 request 里面放入 key-value，让 JSP 读取一样。</p>
<p>接下来就是写 hellovelocity.vm 文件了，这个文件实际定义了 Velocity 的输出内容和格式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//Hellovelocity.vm</span><br><span class="line">#set( $iAmVariable = &quot;good!&quot; )</span><br><span class="line">Welcome $name to velocity.com</span><br><span class="line">today is $date.</span><br><span class="line">#foreach ($i in $list)</span><br><span class="line">$i</span><br><span class="line">#end</span><br><span class="line">$iAmVariable</span><br></pre></td></tr></table></figure></p>
<p>输出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Welcome velocity to velocity.com</span><br><span class="line">today is Sun Mar 23 19:19:04 CST 2014.</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">good!</span><br></pre></td></tr></table></figure></p>
<h3 id="8-StringTemplate"><a href="#8-StringTemplate" class="headerlink" title="8. StringTemplate"></a>8. StringTemplate</h3><p><a href="http://www.stringtemplate.org/" target="_blank" rel="noopener">http://www.stringtemplate.org/</a></p>
<h4 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sqlTemplate(columns,condition)</span><br><span class="line">::= &lt;&lt;select &lt;columns;separator=","&gt;</span><br><span class="line">from table</span><br><span class="line">where 1=1 &lt;if(condition)&gt;and &lt;condition&gt;&lt;endif&gt;</span><br><span class="line">&gt;&gt;</span><br></pre></td></tr></table></figure>
<h4 id="JAVA调用"><a href="#JAVA调用" class="headerlink" title="JAVA调用"></a>JAVA调用</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">STGroup stg = <span class="keyword">new</span> STGroupFile(<span class="string">"dataExtractSql.stg"</span>);</span><br><span class="line">        ST sqlST = stg.getInstanceOf(<span class="string">"sqlTemplate"</span>);</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; columnList = <span class="keyword">new</span> LinkedList&lt;String&gt;();</span><br><span class="line">        columnList.add(<span class="string">"order_id"</span>);</span><br><span class="line">        columnList.add(<span class="string">"price"</span>);</span><br><span class="line">        columnList.add(<span class="string">"phone"</span>);</span><br><span class="line">        sqlST.add(<span class="string">"columns"</span>, columnList);</span><br><span class="line">        sqlST.add(<span class="string">"condition"</span>, <span class="string">"dt='2017-04-04'"</span>);</span><br><span class="line">        System.out.print(sqlST.render());</span><br></pre></td></tr></table></figure>
<h4 id="输出-2"><a href="#输出-2" class="headerlink" title="输出"></a>输出</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> order_id,price,phone</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">table</span></span><br><span class="line"><span class="keyword">where</span> <span class="number">1</span>=<span class="number">1</span> <span class="keyword">and</span> dt=<span class="string">'2017-04-04'</span></span><br></pre></td></tr></table></figure>
<h3 id="9-FreeMarker"><a href="#9-FreeMarker" class="headerlink" title="9. FreeMarker"></a>9. FreeMarker</h3><pre><code>FreeMarker 是一款 模板引擎： 即一种基于模板和要改变的数据， 并用来生成输出文本(HTML网页，电子邮件，配置文件，源代码等)的通用工具。 它不是面向最终用户的，而是一个Java类库，是一款程序员可以嵌入他们所开发产品的组件。
</code></pre><p><img src="http://freemarker.foofun.cn/figures/overview.png" alt="此处输入图片的描述"></p>
<p><a href="http://freemarker.foofun.cn/index.html" target="_blank" rel="noopener">官网</a></p>
<p><a href="http://try.freemarker.org/" target="_blank" rel="noopener">http://try.freemarker.org/</a></p>
<h3 id="10-mustache"><a href="#10-mustache" class="headerlink" title="10. mustache"></a>10. mustache</h3><p><a href="http://mustache.github.com/" target="_blank" rel="noopener"></a></p>
<p><a href="https://github.com/spullara/mustache.java" target="_blank" rel="noopener">mustache.java</a></p>
<p><a href="http://mustache.github.io/mustache.5.html" target="_blank" rel="noopener">语法</a></p>

        </div>
        
<blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2018-11-23T02:22:28.014Z" itemprop="dateUpdated">2018-11-23 10:22:28</time>
</span><br>


        
        转载注明出处，原文地址：<a href="/2018/06/05/Code Generation/" target="_blank" rel="external">https://renkoq.github.io/2018/06/05/Code Generation/</a>
        
    </div>
    <footer>
        <a href="https://renkoq.github.io">
            <img src="/img/avatar.jpg" alt="Renko">
            Renko
        </a>
    </footer>
</blockquote>

        
        
        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/工具/">工具</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://renkoq.github.io/2018/06/05/Code Generation/&title=《Code Generation》 — Renko's blog&pic=https://renkoq.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://renkoq.github.io/2018/06/05/Code Generation/&title=《Code Generation》 — Renko's blog&source=1. javapoethttps://github.com/square/javapoet
开源java代码生成框架，提供Java Api生成.java源..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Code Generation》 — Renko's blog&url=https://renkoq.github.io/2018/06/05/Code Generation/&via=https://renkoq.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://renkoq.github.io/2018/06/05/Code Generation/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
            
    <div id="comment"></div>


        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/06/06/StringTemplate 4/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">StringTemplate 4</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/05/25/命令行处理JSON工具 jq/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">命令行处理JSON工具 jq</h4>
      </a>
    </div>
  
</nav>


    
</article>


</div>

        <footer class="footer">
    
    <div class="bottom">
        <p>
            <span>
                Renko &copy; 2016 - 2018
            </span>
        		
           	
            
            
            <span>
	            Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/codefine/hexo-theme-mellow" target="_blank">mellow</a>
            </span>
            
            
            
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://renkoq.github.io/2018/06/05/Code Generation/&title=《Code Generation》 — Renko's blog&pic=https://renkoq.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://renkoq.github.io/2018/06/05/Code Generation/&title=《Code Generation》 — Renko's blog&source=1. javapoethttps://github.com/square/javapoet
开源java代码生成框架，提供Java Api生成.java源..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Code Generation》 — Renko's blog&url=https://renkoq.github.io/2018/06/05/Code Generation/&via=https://renkoq.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://renkoq.github.io/2018/06/05/Code Generation/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACJklEQVR42u3awZLCIBBFUf//p+PWKU28ryFO0VxWVkqR4+JJNzweeBwv4/XJ2ev397/PRr5l8pAhQ8ayjONykPeQ5V6/v/a9MmTI2I1BFkHC8fpTaeAGM8iQIUPG5XaNbBxHYlqGDBky5k5Xi+l/DlwZMmQswiBFLAlfHsqTw1qGDBmtGXwRv399y/mGDBkylmIc4eDU2pHkURoyZMjozeABx6ebdZwZbzRlyJDRlEGmSOOSLJR8KliDDBkyWjNqEVlrqPFWWtqGkyFDxg6M64jkhwTkWiqP+OIBgAwZMtox0qtaJEz5E75lLF6zkCFDRgsGWS4vMmvF6iy2DBkyujLSeE2DmC8rLYD/PJEhQ8YGDF6IzopRXrKi6JchQ0ZrBm+f8VZa2lZLj06/HAnIkCGjHSMtWccxJLLjSyEyZMjYhpFu0e5rsfGA/rDDlSFDRlPGrOWmFylq4XsauDJkyNiAcd81iJEGHKLKkCGjNYO06dPSlIfmCPjLzDJkyGjH4EUsL0r5EtOOWdx0kyFDRlMG56UzpIEbBLEMGTK2YfDp7tgCDn1KhgwZTRlHONCB4vChQvxjyZAhozVjViNsaEuHG3bpPDJkyOjEICGbbt1qwc3DWoYMGXsy0sPIuVtG/g9wipQhQ4YMsLj00lgcqaQilyFDhgxcdqaHDfzJ5P8NGTJkLMUgRSwvdGuNuR/V4jJkyFiQwUvHNF75nLXjBBkyZGzAeAIYKJNhuNtfVQAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="//cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.1.2"></script>

<script type="text/javascript" src="https://cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script type="text/javascript" src="/js/method.js?v=1.1.2"></script>
<script type="text/javascript" src="/js/blog.js?v=1.1.2"></script>

<!-- third-party -->





<script type="text/javascript" src="/js/plugins/local_search.js?v=1.1.2"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



    
        <script type="text/javascript" src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script type="text/javascript" src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script type="text/javascript" src="/js/plugins/valine.js?v=1.1.2"></script>
    



<script type="text/javascript" src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
<script type="text/javascript" src="/js/plugins/leancloud_visitors.js?v=1.1.2"></script>



    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>




    
</body>
</html>
