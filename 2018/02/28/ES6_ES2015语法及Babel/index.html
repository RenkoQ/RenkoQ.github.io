<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    
    <title>ES6/ES2015语法及Babel | Renko&#39;s blog | 人生如逆旅，我亦是行人</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="前端">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.1.2">
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":true,"app_id":"BG0bK4DLNxackBrBBd7M3TOI-gzGzoHsz","app_key":"ji1U1fUbF7iiD8xufT3rvonA","icon":true}'),
            v: JSON.parse('{"enable":true,"appid":"BG0bK4DLNxackBrBBd7M3TOI-gzGzoHsz","appkey":"ji1U1fUbF7iiD8xufT3rvonA","notify":false,"verify":true,"placeholder":"欢迎留言...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
</head>


<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Renko</h5>
          <a href="mailto:fqx2@outlook.com" title="fqx2@outlook.com" class="mail">fqx2@outlook.com</a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://github.com/RenkoQ" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                关于
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/friend"  >
                <i class="icon icon-lg icon-group"></i>
                友链
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://sunnyfu.cn"  >
                <i class="icon icon-lg icon-anchor"></i>
                简历
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>ES6/ES2015语法及Babel</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header" style="background-image: url(img/banner.jpg)">
    <div class="container fade-scale">
        <h1 class="title">ES6/ES2015语法及Babel</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-02-27T16:01:00.000Z" itemprop="datePublished" class="page-time">
  2018-02-28
</time>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-ES6_ES2015语法及Babel"
  class="post-article article-type-post fade" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">ES6/ES2015语法及Babel</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-02-28 00:01:00" datetime="2018-02-27T16:01:00.000Z"  itemprop="datePublished">2018-02-28</time>

            


            
	<span id="/2018/02/28/ES6_ES2015语法及Babel/" class="leancloud_visitors" data-flag-title="ES6/ES2015语法及Babel" title="ES6/ES2015语法及Babel">
		
			<i class="icon icon-eye"></i>
		
		<span class="leancloud-visitors-count"></span>
	</span>
 

            
    <span>
        <i class="icon icon-comment-o"></i>
        <a href="/2018/02/28/ES6_ES2015语法及Babel/#comment">
            <span class="valine-comment-count" data-xid="/2018/02/28/ES6_ES2015语法及Babel/"></span>
        </a>
    </span>


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>偶然在项目中看见，感觉是重要的内容，先了解下基本语法，等有空再深入学习。<br>babel迷之安装 一觉醒来打开webstorm发现装上了Σ(っ °Д °;)っ<br>File Watcher打开添加babel时programa一栏填写:</p>
<pre><code>$ProjectFileDir$/node_modules/.bin/babel
</code></pre><p>然后就能自动转码为ES5啦:)</p>
<h3 id="1-文档转换"><a href="#1-文档转换" class="headerlink" title="1. 文档转换"></a>1. 文档转换</h3><p>Babel的REPL在线编译器，将ES6代码转为ES5代码。<br><a href="https://babeljs.io/repl/" target="_blank" rel="external">https://babeljs.io/repl/</a></p>
<h3 id="2-ES6部分特性"><a href="#2-ES6部分特性" class="headerlink" title="2. ES6部分特性"></a>2. ES6部分特性</h3><ol>
<li><code>var</code>声明的内层变量会覆盖外层变量，而<code>let</code>提供块级作用域，变量只在代码块内有效。</li>
<li>当引用第三方库时声明的变量，用<code>const</code>来声明可以避免未来不小心重命名而导致出现bug</li>
<li>引入<code>Class</code>（类）概念，可以通过<code>extends</code>关键字实现继承。（这部分感觉有点像java）</li>
<li><code>arrow function箭头函数的</code>this<code>是继承外层代码块的</code>this`。</li>
<li><code>template string</code>，用反引号来标识起始，用<code>${}</code>来引用变量，而且所有的空格和缩进都会被保留在输出之中.</li>
<li><code>destructuring</code>解构:从数组和对象中提取值，对变量进行赋值。</li>
<li><code>default</code>默认值, <code>rest</code>语法(用Rest操作符以后，args参数就是一个数组了，任何操作数组的方法都可以直接对args使用)</li>
</ol>
<hr>
<p>电脑重装了，反正要重新配置环境，不如找个东西边学边装。就决定是你了，ES6！</p>
<ol>
<li>惯例安装nodejs以及express</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ npm install express --save</div><div class="line">$ npm install body-parser --save</div><div class="line">$ npm install cookie-parser --save</div><div class="line">$ npm install multer --save</div><div class="line">$ npm list express</div></pre></td></tr></table></figure>
<p>途中出现第一个问题，<code>npm ERR! extraneous</code>，<a href="https://github.com/npm/npm/issues/10004#issuecomment-210710935，快捷方法是重装nodejs后用管理员模式安装&gt;_o" target="_blank" rel="external">https://github.com/npm/npm/issues/10004#issuecomment-210710935，快捷方法是重装nodejs后用管理员模式安装&gt;_o</a><br>第二个问题 <code>express command not found</code> ，解决方法<a href="https://stackoverflow.com/questions/23002448/express-command-not-found" target="_blank" rel="external">https://stackoverflow.com/questions/23002448/express-command-not-found</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g express-generator</div></pre></td></tr></table></figure></p>
<ol>
<li>gulp<br><a href="http://www.gulpjs.com.cn/docs/" target="_blank" rel="external">文档</a><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ touch .babelrc</div><div class="line"></div><div class="line">$ touch gulpfile.babel.js</div></pre></td></tr></table></figure>
</li>
</ol>
<p>因为使用ES6语法，所以必须创建<code>gulpfile.babel.js</code>文件而不是<code>gulpfile.js</code></p>
<hr>
<p>然后又出现了很多问题，我就先去学习了gulp的详细用法，写了三篇文章总结。又学会了使用yeoman工具直接构建项目骨架。详细参见之前的博文。我发现webstorm里也可以直接选择yeoman构建，神器啊。<br>下面真的开始学习ES6语法了 O_&lt;</p>
<hr>
<p>参考阮一峰的<a href="http://es6.ruanyifeng.com/" target="_blank" rel="external">《ECMAScript 6 入门》</a></p>
<h3 id="1-let-amp-const"><a href="#1-let-amp-const" class="headerlink" title="1. let &amp; const"></a>1. let &amp; const</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">1</span>;i&lt;<span class="number">3</span>;i++)&#123;</div><div class="line">    <span class="built_in">console</span>.log(i);</div><div class="line">  &#125;</div><div class="line">  <span class="built_in">console</span>.log(i);</div><div class="line">&#125;</div><div class="line">test();</div></pre></td></tr></table></figure>
<ol>
<li>块作用域（大括号内）第二个<code>console.log(i)</code>脱离了块作用域，于是只能输出1，2。</li>
<li>严格模式：ES5代码中存在<code>use strict</code>来启动文件采用严格模式，ES6中则强制开启。严格模式中变量未声明则不能引用，会报错。</li>
<li>使用let时不能重复定义变量。</li>
<li>使用const声明的常量不能修改。</li>
<li>第4点注意情况</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> PI =<span class="number">3.1415926</span>;   <span class="comment">//不能修改</span></div><div class="line"><span class="keyword">const</span> K =&#123;</div><div class="line">  <span class="attr">a</span>:<span class="number">1</span></div><div class="line">&#125;</div><div class="line"><span class="comment">//K指向对象存储的指针，对象可变指针不变。</span></div><div class="line">K.b = <span class="number">3</span>;</div></pre></td></tr></table></figure>
<h3 id="2-解构赋值"><a href="#2-解构赋值" class="headerlink" title="2. 解构赋值"></a>2. 解构赋值</h3><a id="more"></a>
<p>代码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> a,b,rest;</div><div class="line">  [a,b]=[<span class="number">1</span>,<span class="number">2</span>];</div><div class="line">  <span class="built_in">console</span>.log(a,b);   <span class="comment">//1,2</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> a,b,rest;</div><div class="line">  [a,b,...rest]=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</div><div class="line">  <span class="built_in">console</span>.log(a,b,rest);  <span class="comment">//1,2,(4) [3, 4, 5, 6]</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> a,b;</div><div class="line">  (&#123;a,b&#125;=&#123;<span class="attr">a</span>:<span class="number">1</span>,<span class="attr">b</span>:<span class="number">2</span>&#125;)</div><div class="line">  <span class="built_in">console</span>.log(a,b);   <span class="comment">//1,2</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> a,b,c,rest;</div><div class="line">  [a,b]=[<span class="number">1</span>,<span class="number">2</span>]</div><div class="line">  <span class="built_in">console</span>.log(a,b,c);  <span class="comment">//1,2,undefined</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> a,b,c,rest;</div><div class="line">  [a,b,c=<span class="number">3</span>]=[<span class="number">1</span>,<span class="number">2</span>]</div><div class="line">  <span class="built_in">console</span>.log(a,b,c);   <span class="comment">//1,2,3</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//通过解构赋值实现变量交换，不需要中间变量。</span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> a=<span class="number">1</span>;</div><div class="line">  <span class="keyword">let</span> b=<span class="number">2</span>;</div><div class="line">  [a,b]=[b,a];</div><div class="line">  <span class="built_in">console</span>.log(a,b);  <span class="comment">//2,1</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> [<span class="number">1</span>,<span class="number">2</span>];</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">let</span> a,b;</div><div class="line">  [a,b]=f();</div><div class="line">  <span class="built_in">console</span>.log(a,b);  <span class="comment">//1,2</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">let</span> a,b,c;</div><div class="line">  [a,,,b]=f();   <span class="comment">//1,2,3,4 b对应4</span></div><div class="line">  <span class="built_in">console</span>.log(a,b);   <span class="comment">//1,4</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">let</span> a,b,c;</div><div class="line">  [a,...b]=f();   <span class="comment">//取出第一个元素给a，其他都赋值给一个数组到b</span></div><div class="line">  <span class="built_in">console</span>.log(a,b);  <span class="comment">//1,(4) [2, 3, 4, 5]</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">let</span> a,b,c;</div><div class="line">  [a,,...b]=f();</div><div class="line">  <span class="built_in">console</span>.log(a,b);  <span class="comment">//1,(3) [3, 4, 5]</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> o= &#123;<span class="attr">p</span>:<span class="number">42</span>,<span class="attr">q</span>:<span class="literal">true</span>&#125;;</div><div class="line">  <span class="keyword">let</span> &#123;p,q&#125;=o;</div><div class="line">  <span class="built_in">console</span>.log(p,q);  <span class="comment">//42,true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> &#123;a=<span class="number">10</span>,b=<span class="number">5</span>&#125;=&#123;<span class="attr">a</span>:<span class="number">3</span>&#125;;</div><div class="line">  <span class="built_in">console</span>.log(a,b);  <span class="comment">//3,5</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//嵌套对象和数组的应用</span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> metaData =&#123;</div><div class="line">    <span class="attr">title</span>:<span class="string">'abc'</span>,</div><div class="line">    <span class="attr">test</span>:[&#123;</div><div class="line">      <span class="attr">title</span>:<span class="string">'test'</span>,</div><div class="line">      <span class="attr">desc</span>:<span class="string">'description'</span></div><div class="line">    &#125;]</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">let</span> &#123;<span class="attr">title</span>:esTitle,<span class="attr">test</span>:[&#123;<span class="attr">title</span>:cnTitle&#125;]&#125;=metaData;</div><div class="line">  <span class="built_in">console</span>.log(esTitle,cnTitle);  <span class="comment">//abc,test</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="3-正则扩展"><a href="#3-正则扩展" class="headerlink" title="3. 正则扩展"></a>3. 正则扩展</h3><p>TBC</p>
<h3 id="4-字符串扩展"><a href="#4-字符串扩展" class="headerlink" title="4. 字符串扩展"></a>4. 字符串扩展</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//unicode表示方法</span></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'a'</span>,<span class="string">'\u0061'</span>);   <span class="comment">//a,a</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'s'</span>,<span class="string">'\u20BB7'</span>);  <span class="comment">//s,₻7   因为编码超过0XFFFF，把20BB和7分别作为字符</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'s'</span>,<span class="string">'\u&#123;20BB7&#125;'</span>);  <span class="comment">//s 𠮷</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> s = <span class="string">'𠮷'</span>;  <span class="comment">//码值大于两个字节，此处为4字节。每两字节为一长度。</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'length'</span>,s.length);  <span class="comment">//length 2   es5中处理</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'0'</span>,s.charAt(<span class="number">0</span>));   <span class="comment">//0 �   es5中取编码</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'1'</span>,s.charAt(<span class="number">1</span>));   <span class="comment">//1 �</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'at0'</span>,s.charCodeAt(<span class="number">0</span>));   <span class="comment">//at0,55362</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'at1'</span>,s.charCodeAt(<span class="number">1</span>));   <span class="comment">//at1,57271</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> s1 = <span class="string">'𠮷a'</span>;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'length'</span>,s1.length);  <span class="comment">//length 3</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'code0'</span>,s1.codePointAt(<span class="number">0</span>));  <span class="comment">//code0,134071  es6取字符码值(10进制)</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'code0'</span>,s1.codePointAt(<span class="number">0</span>).toString(<span class="number">16</span>));  <span class="comment">//code0 20bb7,转换为16进制</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'code1'</span>,s1.codePointAt(<span class="number">1</span>));  <span class="comment">//code1,57271 与es5中一样取后两字节</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'code2'</span>,s1.codePointAt(<span class="number">2</span>));  <span class="comment">//code2，97  即取a</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCharCode(<span class="string">'0x20BB7'</span>));  <span class="comment">//ஷ</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">String</span>.fromCodePoint(<span class="string">'0x20BB7'</span>));  <span class="comment">//𠮷</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> str =<span class="string">'\u&#123;20BB7&#125;abc'</span>;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;str.length;i++)&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'es5'</span>,str[i]);</div><div class="line">  &#125;  <span class="comment">//es5 �,es5 �,es5 a,es5 b,es5 c</span></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> code <span class="keyword">of</span> str)&#123;                    <span class="comment">//字符串的遍历器接口,识别大于0xFFFF的码点</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'es6'</span>,code);</div><div class="line">  &#125;  <span class="comment">//es6 𠮷,es6 a,es6 b,es6 c</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> str=<span class="string">'string'</span>;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'includes'</span>,str.includes(<span class="string">"r"</span>));  <span class="comment">//includes,true</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'start'</span>,str.startsWith(<span class="string">'str'</span>)); <span class="comment">//start,true</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'end'</span>,str.endsWith(<span class="string">'ing'</span>));  <span class="comment">//end,true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> str=<span class="string">'abc'</span>;</div><div class="line">  <span class="built_in">console</span>.log(str.repeat(<span class="number">2</span>));  <span class="comment">//abcabc</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> name =<span class="string">'list'</span>;</div><div class="line">  <span class="keyword">let</span> info = <span class="string">'hello world'</span>;</div><div class="line">  <span class="keyword">let</span> m = <span class="string">`I am <span class="subst">$&#123;name&#125;</span>,<span class="subst">$&#123;info&#125;</span>`</span>;</div><div class="line">  <span class="built_in">console</span>.log(m);  <span class="comment">//I am list,hello world</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'1'</span>.padStart(<span class="number">2</span>,<span class="string">'0'</span>));  <span class="comment">//01  长度为2，不够向前补第二个参数 可用在日期里</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'1'</span>.padEnd(<span class="number">2</span>,<span class="string">'0'</span>));  <span class="comment">//10</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> user = &#123;</div><div class="line">    <span class="attr">name</span>:<span class="string">'list'</span>,</div><div class="line">    <span class="attr">info</span>:<span class="string">'hello world'</span></div><div class="line">  &#125;;</div><div class="line">  <span class="built_in">console</span>.log(abc<span class="string">`i am <span class="subst">$&#123;user.name&#125;</span>,<span class="subst">$&#123;user.info&#125;</span>`</span>);  <span class="comment">//i am ,,,listhello world</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">abc</span>(<span class="params">s,v1,v2</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(s,v1,v2);   <span class="comment">//(3) ["i am ", ",", "", raw: Array(3)] "list" "hello world"</span></div><div class="line">    <span class="keyword">return</span> s+v1+v2;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">String</span>.raw<span class="string">`Hi\n<span class="subst">$&#123;<span class="number">1</span>+<span class="number">2</span>&#125;</span>`</span>);  <span class="comment">//Hi\n3  String.raw方法而且对斜杠进行转义</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">`Hi\n<span class="subst">$&#123;<span class="number">1</span>+<span class="number">2</span>&#125;</span>`</span>);  <span class="comment">//Hi 换行 3</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="5-数值扩展"><a href="#5-数值扩展" class="headerlink" title="5. 数值扩展"></a>5. 数值扩展</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="number">0b111110111</span>);  <span class="comment">//十进制503  es6中二进制都以0B开头（大小写都可）</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="number">0o767</span>);  <span class="comment">//十进制503  es6中八进制都以0O开头</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'15'</span>,<span class="built_in">Number</span>.isFinite(<span class="number">15</span>));  <span class="comment">//15 true</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'NaN'</span>,<span class="built_in">Number</span>.isFinite(<span class="literal">NaN</span>));  <span class="comment">//NaN false</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'1/0'</span>,<span class="built_in">Number</span>.isFinite(<span class="string">'true'</span>/<span class="number">0</span>));  <span class="comment">//1/0 false</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'NaN'</span>,<span class="built_in">Number</span>.isNaN(<span class="literal">NaN</span>));  <span class="comment">//NaN true  判断是否非数字</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'NaN'</span>,<span class="built_in">Number</span>.isNaN(<span class="number">0</span>));  <span class="comment">//NaN false  0是数字</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'25'</span>,<span class="built_in">Number</span>.isInteger(<span class="number">25</span>));  <span class="comment">//25 true 判断是否是整数</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'25.0'</span>,<span class="built_in">Number</span>.isInteger(<span class="number">25.0</span>));  <span class="comment">//25.0 true</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'25.1'</span>,<span class="built_in">Number</span>.isInteger(<span class="number">25.1</span>));  <span class="comment">//25.1 false</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'25'</span>,<span class="built_in">Number</span>.isInteger(<span class="string">'25'</span>));  <span class="comment">//25 false  接收参数必须是整数 -2^53-2^53区间内</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">Number</span>.MAX_SAFE_INTEGER);  <span class="comment">//9007199254740991</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">Number</span>.MIN_SAFE_INTEGER);  <span class="comment">//-9007199254740991</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'10'</span>,<span class="built_in">Number</span>.isSafeInteger(<span class="number">10</span>));  <span class="comment">//10 true</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'a'</span>,<span class="built_in">Number</span>.isSafeInteger(<span class="string">'a'</span>));  <span class="comment">//a false</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="number">4.1</span>,<span class="built_in">Math</span>.trunc(<span class="number">4.1</span>));  <span class="comment">//4.1 4 取整数部分</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="number">4.9</span>,<span class="built_in">Math</span>.trunc(<span class="number">4.9</span>));  <span class="comment">//4.9 4</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'-5'</span>,<span class="built_in">Math</span>.sign(<span class="number">-5</span>));  <span class="comment">//-5 -1</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'0'</span>,<span class="built_in">Math</span>.sign(<span class="number">0</span>));  <span class="comment">//0 0</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'5'</span>,<span class="built_in">Math</span>.sign(<span class="number">5</span>));  <span class="comment">//5 1</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'50'</span>,<span class="built_in">Math</span>.sign(<span class="string">'50'</span>));  <span class="comment">//50 1</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'foo'</span>,<span class="built_in">Math</span>.sign(<span class="string">'foo'</span>));  <span class="comment">//foo NaN</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'-1'</span>,<span class="built_in">Math</span>.cbrt(<span class="number">-1</span>));  <span class="comment">//-1 -1 立方根</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'8'</span>,<span class="built_in">Math</span>.cbrt(<span class="number">8</span>));  <span class="comment">//8 2</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="6-数组扩展"><a href="#6-数组扩展" class="headerlink" title="6.数组扩展"></a>6.数组扩展</h3><p>问题：<br><code>.values is not a function</code><br>解决：<br><a href="https://stackoverflow.com/questions/38748445/uncaught-typeerror-object-values-is-not-a-function-javascript" target="_blank" rel="external">Uncaught TypeError: Object.values is not a function JavaScript</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values" target="_blank" rel="external">MDN文档Object.values()</a><br>需要<code>import babel-polyfill</code>，否则不兼容。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> arr = <span class="built_in">Array</span>.of(<span class="number">3</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>);  <span class="comment">//把一组数据变量转化为数据类型</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'arr='</span>,arr);  <span class="comment">//arr= (5) [3, 4, 7, 9, 11]</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> empty = <span class="built_in">Array</span>.of();</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'empty='</span>,empty);  <span class="comment">//empty= [] 不传参数，返回空数组</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> p = <span class="built_in">document</span>.querySelectorAll(<span class="string">'p'</span>);</div><div class="line">  <span class="keyword">let</span> pArr = <span class="built_in">Array</span>.from(p);  <span class="comment">//把集合转换成数组</span></div><div class="line">  pArr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(item.textContent);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">Array</span>.from([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>],<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;<span class="keyword">return</span> item*<span class="number">2</span>;&#125;));  <span class="comment">//(3) [2, 6, 10]</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'fill-7'</span>,[<span class="number">1</span>,<span class="string">'a'</span>,<span class="literal">undefined</span>].fill(<span class="number">7</span>));  <span class="comment">//fill-7 (3) [7, 7, 7]</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'fill,pos'</span>,[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>].fill(<span class="number">7</span>,<span class="number">1</span>,<span class="number">3</span>));  <span class="comment">//fill,pos (3) ["a", 7, 7]</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> index <span class="keyword">of</span> [<span class="string">'1'</span>,<span class="string">'c'</span>,<span class="string">'ks'</span>].keys())&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'keys'</span>,index);  <span class="comment">//keys 0   keys 1   keys 2</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> value <span class="keyword">of</span> [<span class="string">'1'</span>,<span class="string">'c'</span>,<span class="string">'ks'</span>].entries())&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'entries'</span>,value);  <span class="comment">//entries (2) [0, "1"]  entries (2) [1, "c"]  entries (2) [2, "ks"]</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> [index,value] <span class="keyword">of</span> [<span class="string">'1'</span>,<span class="string">'c'</span>,<span class="string">'ks'</span>].entries())&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'entries'</span>,index,value);  <span class="comment">//entries 0 1  entries 1 c  entries 2 ks</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>].copyWithin(<span class="number">0</span>,<span class="number">3</span>,<span class="number">4</span>));</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>].find(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;<span class="keyword">return</span> item&gt;<span class="number">3</span>&#125;));  <span class="comment">//找出第一个符合的成员</span></div><div class="line">  <span class="built_in">console</span>.log([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>].findIndex(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;<span class="keyword">return</span> item&gt;<span class="number">3</span>&#125;));  <span class="comment">//找出第一个符合的成员的下标</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'number'</span>,[<span class="number">1</span>,<span class="number">2</span>,<span class="literal">NaN</span>].includes(<span class="number">1</span>));  <span class="comment">//number true 看数组中是否包括1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="7-函数扩展"><a href="#7-函数扩展" class="headerlink" title="7. 函数扩展"></a>7. 函数扩展</h3><p>函数新增特性：参数默认值；rest参数；扩展运算符；箭头函数；this绑定；尾调用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">x,y = <span class="string">'world'</span></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'默认值'</span>,x,y);</div><div class="line">  &#125;</div><div class="line">  test(<span class="string">'hello'</span>);   <span class="comment">//默认值 hello world</span></div><div class="line">  test(<span class="string">'hello'</span>,<span class="string">'u'</span>);  <span class="comment">//默认值 hello u</span></div><div class="line">&#125;<span class="comment">//y后面不能再加没有赋值的变量</span></div><div class="line"><span class="comment">//参数变量x是默认声明的，在函数体中，不能用let或const再次声明，否则会报错。</span></div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> x  = <span class="string">'test'</span>;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">test2</span>(<span class="params">x,y=x</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'作用域'</span>,x,y);</div><div class="line">  &#125;</div><div class="line">  test2(<span class="string">'cute'</span>);  <span class="comment">//作用域 cute cute</span></div><div class="line">  test2(); <span class="comment">//作用域 undefined undefined</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> x  = <span class="string">'test'</span>;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">test2</span>(<span class="params">c,y=x</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'作用域'</span>,c,y);</div><div class="line">  &#125;</div><div class="line">  test2(<span class="string">'cute'</span>);  <span class="comment">//作用域 cute test</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">test3</span>(<span class="params">...arg</span>)</span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> arg)&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'rest'</span>,v);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  test3(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="string">'a'</span>); <span class="comment">//rest 1；rest 2；rest 3；rest 4；rest 5；</span></div><div class="line">&#125;<span class="comment">//rest参数（形式为...变量名），用于获取函数的多余参数,把他们都转换成数组</span></div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(...[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]); <span class="comment">//1 2 3  把数组转换成离散值</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'a'</span>,...[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]); <span class="comment">//a 1 2 3</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> arrow = <span class="function"><span class="params">v</span>=&gt;</span>v*<span class="number">2</span>;</div><div class="line">  <span class="keyword">let</span> arrow2 = <span class="function"><span class="params">()</span>=&gt;</span><span class="number">5</span>;</div><div class="line">  <span class="built_in">console</span>.log(arrow(<span class="number">3</span>)); <span class="comment">//6</span></div><div class="line">  <span class="built_in">console</span>.log(arrow2()); <span class="comment">//5</span></div><div class="line">&#125;<span class="comment">//箭头函数:  let函数名=函数参数=&gt;函数返回值</span></div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">tail</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'tail'</span>,x);</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fx</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> tail(x);</div><div class="line">  &#125;</div><div class="line">  fx(<span class="number">123</span>);  <span class="comment">//tail 123</span></div><div class="line">&#125;<span class="comment">//尾调用  提升性能</span></div></pre></td></tr></table></figure>
<h3 id="8-对象扩展"><a href="#8-对象扩展" class="headerlink" title="8. 对象扩展"></a>8. 对象扩展</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="comment">//简洁表示法</span></div><div class="line">  <span class="keyword">let</span> o = <span class="number">1</span>;</div><div class="line">  <span class="keyword">let</span> k = <span class="number">2</span>;</div><div class="line">  <span class="keyword">let</span> es5 = &#123;</div><div class="line">    <span class="attr">o</span>: o,</div><div class="line">    <span class="attr">k</span>: k</div><div class="line">  &#125;;</div><div class="line">  <span class="keyword">let</span> es6 = &#123;</div><div class="line">    o,</div><div class="line">    k</div><div class="line">  &#125;;</div><div class="line">  <span class="built_in">console</span>.log(es5,es6); <span class="comment">//&#123;o: 1, k: 2&#125; &#123;o: 1, k: 2&#125;</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> es5_method = &#123;</div><div class="line">    <span class="attr">hello</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'hello'</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">  <span class="keyword">let</span> es6_method = &#123;</div><div class="line">    hello()&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'hello'</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">  <span class="built_in">console</span>.log(es5_method.hello(),es6_method.hello()); <span class="comment">//hello;hello</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="comment">//属性表达式</span></div><div class="line">  <span class="keyword">let</span> a = <span class="string">'b'</span>;</div><div class="line">  <span class="keyword">let</span> es5_obj = &#123;</div><div class="line">    <span class="attr">a</span>:<span class="string">'c'</span>,</div><div class="line">    <span class="attr">b</span>:<span class="string">'c'</span></div><div class="line">  &#125;;</div><div class="line">  <span class="comment">//ES6允许字面量定义对象时，用表达式(放在方括号内)作为对象的属性名。</span></div><div class="line">  <span class="keyword">let</span> es6_obj = &#123;</div><div class="line">    [a]:<span class="string">'c'</span></div><div class="line">  &#125;;</div><div class="line">  <span class="built_in">console</span>.log(es5_obj,es6_obj);  <span class="comment">//&#123;a: "c", b: "c"&#125; &#123;b: "c"&#125;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="comment">//新增API</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'字符串'</span>,<span class="built_in">Object</span>.is(<span class="string">'abc'</span>,<span class="string">'abc'</span>),<span class="string">'abc'</span>===<span class="string">'abc'</span>);  <span class="comment">//字符串 true true</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'数组'</span>,<span class="built_in">Object</span>.is([],[]),[]===[]); <span class="comment">//数组 false false 数组也是引用类型，地址不同不想等</span></div><div class="line">&#125;<span class="comment">//Object.is功能等同===</span></div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'拷贝'</span>,<span class="built_in">Object</span>.assign(&#123;<span class="attr">a</span>:<span class="string">'a'</span>&#125;,&#123;<span class="attr">b</span>:<span class="string">'b'</span>&#125;)); <span class="comment">//拷贝 &#123;a: "a", b: "b"&#125;</span></div><div class="line">&#125; <span class="comment">//Object.assign将源对象的所有可枚举属性(不拷贝继承属性)，复制到目标对象（第一个参数）</span></div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> test = &#123;<span class="attr">k</span>:<span class="number">123</span>,<span class="attr">o</span>:<span class="number">456</span>&#125;;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> [key,value] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(test))&#123;</div><div class="line">    <span class="built_in">console</span>.log([key,value]);</div><div class="line">  &#125; <span class="comment">//(2) ["k", 123] ; (2) ["o", 456]</span></div><div class="line">&#125;<span class="comment">//Object.entries遍历对象</span></div></pre></td></tr></table></figure>
<h3 id="9-Symbol用法"><a href="#9-Symbol用法" class="headerlink" title="9. Symbol用法"></a>9. Symbol用法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="comment">//Symbol声明变量独一无二</span></div><div class="line">  <span class="keyword">let</span> a1=<span class="built_in">Symbol</span>();</div><div class="line">  <span class="keyword">let</span> a2=<span class="built_in">Symbol</span>();</div><div class="line">  <span class="built_in">console</span>.log(a1===a2);  <span class="comment">//false</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> a3 = <span class="built_in">Symbol</span>.for(<span class="string">'a3'</span>);</div><div class="line">  <span class="keyword">let</span> a4 = <span class="built_in">Symbol</span>.for(<span class="string">'a3'</span>);</div><div class="line">  <span class="built_in">console</span>.log(a3===a4);  <span class="comment">//true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> a1 = <span class="built_in">Symbol</span>.for(<span class="string">'abc'</span>);</div><div class="line">  <span class="keyword">let</span> obj = &#123;</div><div class="line">    [a1]:<span class="string">'123'</span>,</div><div class="line">    <span class="string">'abc'</span>:<span class="number">345</span>,</div><div class="line">    <span class="string">'c'</span>:<span class="number">456</span></div><div class="line">  &#125;;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'obj'</span>,obj);  <span class="comment">//obj &#123;abc: 345, c: 456, Symbol(abc): "123"&#125;</span></div><div class="line"></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> [key,value] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(obj))&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'let of'</span>,key,value);  <span class="comment">//let of abc 345; let of c 456</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="built_in">Object</span>.getOwnPropertySymbols(obj).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(obj[item]);  <span class="comment">//123</span></div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  <span class="built_in">Reflect</span>.ownKeys(obj).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'ownKeys'</span>,item,obj[item]); <span class="comment">//ownKeys abc 345;ownKeys c 456;ownKeys Symbol(abc) 123</span></div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="10-set-map数据结构"><a href="#10-set-map数据结构" class="headerlink" title="10. set-map数据结构"></a>10. set-map数据结构</h3><p>优先使用map，对数据要求高用set。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> list = <span class="keyword">new</span> <span class="built_in">Set</span>();</div><div class="line">  list.add(<span class="number">5</span>);</div><div class="line">  list.add(<span class="number">7</span>);</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'size'</span>,list.size);  <span class="comment">//size 2 类似数组中length</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</div><div class="line">  <span class="keyword">let</span> list = <span class="keyword">new</span> <span class="built_in">Set</span>(arr); <span class="comment">//转换数组为set集合</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'size'</span>,list.size);  <span class="comment">//size 5</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> list = <span class="keyword">new</span> <span class="built_in">Set</span>();</div><div class="line">  list.add(<span class="number">1</span>);</div><div class="line">  list.add(<span class="number">2</span>);</div><div class="line">  list.add(<span class="number">1</span>);</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'list'</span>,list);  <span class="comment">//list Set(2) &#123;1, 2&#125;</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> arr  = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>];</div><div class="line">  <span class="keyword">let</span> list2 =<span class="keyword">new</span> <span class="built_in">Set</span>(arr);</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'list2'</span>,list2);  <span class="comment">//list2 Set(3) &#123;1, 2, 3&#125;</span></div><div class="line"></div><div class="line">  <span class="keyword">let</span> arr2  = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="string">'2'</span>];</div><div class="line">  <span class="keyword">let</span> list3 =<span class="keyword">new</span> <span class="built_in">Set</span>(arr2);</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'list3'</span>,list3);  <span class="comment">//list3 Set(4) &#123;1, 2, 3, "2"&#125;</span></div><div class="line">&#125;<span class="comment">//该特性可以去除重复元素</span></div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> arr = [<span class="string">'add'</span>,<span class="string">'delete'</span>,<span class="string">'clear'</span>,<span class="string">'has'</span>];</div><div class="line">  <span class="keyword">let</span> list = <span class="keyword">new</span> <span class="built_in">Set</span>(arr);</div><div class="line"></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'has'</span>,list.has(<span class="string">'add'</span>));  <span class="comment">//has true</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'delete'</span>,list.delete(<span class="string">'add'</span>),list);  <span class="comment">//delete true Set(3) &#123;"delete", "clear", "has"&#125;</span></div><div class="line">  list.clear();</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'list'</span>,list);  <span class="comment">//list Set(0) &#123;&#125;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> arr = [<span class="string">'add'</span>,<span class="string">'delete'</span>,<span class="string">'clear'</span>,<span class="string">'has'</span>];</div><div class="line">  <span class="keyword">let</span> list = <span class="keyword">new</span> <span class="built_in">Set</span>(arr);</div><div class="line"></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">of</span> list.keys())&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'keys'</span>,key);  <span class="comment">//keys add;keys delete;keys clear;keys has</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> value <span class="keyword">of</span> list.values())&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'value'</span>,value);  <span class="comment">//value add;value delete;value clear;value has</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> value <span class="keyword">of</span> list)&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'value'</span>,value);  <span class="comment">//value add;value delete;value clear;value has</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> [key,value] <span class="keyword">of</span> list.entries())&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'entries'</span>,key,value);  <span class="comment">//entries add add;entries delete delete;entries clear clear;entries has has</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  list.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(item);  <span class="comment">//add;delete;clear;has</span></div><div class="line">  &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> weakList = <span class="keyword">new</span> <span class="built_in">WeakSet</span>();  <span class="comment">//元素只能是对象，弱引用 没有clear方法，set属性，不能遍历</span></div><div class="line">  <span class="keyword">let</span> arg = &#123;&#125;;</div><div class="line">  weakList.add(arg);</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'weakList'</span>,weakList);  <span class="comment">//weakList WeakSet &#123;&#123;…&#125;&#125;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</div><div class="line">  <span class="keyword">let</span> arr = [<span class="string">'123'</span>];</div><div class="line"></div><div class="line">  map.set(arr,<span class="number">456</span>);</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'map'</span>,map,map.get(arr));  <span class="comment">//map Map(1) &#123;Array(1) =&gt; 456&#125; 456</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> map  = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="string">'a'</span>,<span class="number">123</span>],[<span class="string">'b'</span>,<span class="number">456</span>]]);</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'map args'</span>,map);  <span class="comment">//map args Map(2) &#123;"a" =&gt; 123, "b" =&gt; 456&#125;</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'size'</span>,map.size); <span class="comment">//size 2</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'delete'</span>,map.delete(<span class="string">'a'</span>),map); <span class="comment">//delete true Map(1) &#123;"b" =&gt; 456&#125;</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'clear'</span>,map.clear(),map);  <span class="comment">//clear undefined Map(0) &#123;&#125;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> weakmap = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</div><div class="line"></div><div class="line">  <span class="keyword">let</span> o =&#123;&#125;;</div><div class="line">  weakmap.set(o,<span class="number">123</span>);</div><div class="line">  <span class="built_in">console</span>.log(weakmap.get(o));  <span class="comment">//123</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="comment">//数据结构横向对比，增删改查</span></div><div class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</div><div class="line">  <span class="keyword">let</span> array  = [];</div><div class="line">  <span class="comment">//增</span></div><div class="line">  map.set(<span class="string">'t'</span>,<span class="number">1</span>);</div><div class="line">  array.push(&#123;<span class="attr">t</span>:<span class="number">1</span>&#125;);</div><div class="line">  <span class="built_in">console</span>.info(<span class="string">'map array'</span>,map,array);  <span class="comment">//map array Map(1) &#123;"t" =&gt; 1&#125; [&#123;…&#125;]</span></div><div class="line">  <span class="comment">//查</span></div><div class="line">  <span class="keyword">let</span> map_exist = map.has(<span class="string">'t'</span>);</div><div class="line">  <span class="keyword">let</span> array_exist = array.find(<span class="function"><span class="params">item</span>=&gt;</span>item.t);</div><div class="line">  <span class="built_in">console</span>.info(<span class="string">'map-array'</span>,map_exist,array_exist);  <span class="comment">//map-array true &#123;t: 1&#125;</span></div><div class="line">  <span class="comment">//改</span></div><div class="line">  map.set(<span class="string">'t'</span>,<span class="number">2</span>);</div><div class="line">  array.forEach(<span class="function"><span class="params">item</span>=&gt;</span>item.t?item.t=<span class="number">2</span>:<span class="string">''</span>);</div><div class="line">  <span class="built_in">console</span>.info(<span class="string">'map-array-modify'</span>,map,array);  <span class="comment">//map-array-modify Map(1) &#123;"t" =&gt; 2&#125; [&#123;…&#125;]</span></div><div class="line">  <span class="comment">//删</span></div><div class="line">  map.delete(<span class="string">'t'</span>);</div><div class="line">  <span class="keyword">let</span> index = array.findIndex(<span class="function"><span class="params">item</span> =&gt;</span> item.t);</div><div class="line">  array.splice(index,<span class="number">1</span>);</div><div class="line">  <span class="built_in">console</span>.info(<span class="string">'map array-empty'</span>,map,array);  <span class="comment">//map array-empty Map(0) &#123;&#125; []</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="comment">//set和array对比</span></div><div class="line">  <span class="keyword">let</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>();</div><div class="line">  <span class="keyword">let</span> array = [];</div><div class="line">  <span class="comment">//增</span></div><div class="line">  set.add(&#123;<span class="attr">t</span>:<span class="number">1</span>&#125;);</div><div class="line">  array.push(&#123;<span class="attr">t</span>:<span class="number">1</span>&#125;);</div><div class="line">  <span class="built_in">console</span>.info(<span class="string">'set-array'</span>,set,array);  <span class="comment">//set-array Set(1) &#123;&#123;…&#125;&#125; [&#123;…&#125;]</span></div><div class="line">  <span class="comment">//查</span></div><div class="line">  <span class="keyword">let</span> set_exist = set.has(&#123;<span class="attr">t</span>:<span class="number">1</span>&#125;);</div><div class="line">  <span class="keyword">let</span> array_exist = array.find(<span class="function"><span class="params">item</span>=&gt;</span>item.t);</div><div class="line">  <span class="built_in">console</span>.info(<span class="string">'set-array'</span>,set_exist,array_exist);  <span class="comment">//set-array false &#123;t: 1&#125;</span></div><div class="line">  <span class="comment">//改</span></div><div class="line">  set.forEach(<span class="function"><span class="params">item</span>=&gt;</span>item.t?item.t=<span class="number">2</span>:<span class="string">''</span>);</div><div class="line">  array.forEach(<span class="function"><span class="params">item</span>=&gt;</span>item.t?item.t=<span class="number">2</span>:<span class="string">''</span>);</div><div class="line">  <span class="built_in">console</span>.info(<span class="string">'set-array-modify'</span>,set,array);  <span class="comment">//set-array-modify Set(1) &#123;&#123;…&#125;&#125;size: (...)__proto__: Set[[Entries]]: Array(1)0: Objectlength: 1 [&#123;…&#125;]</span></div><div class="line">  <span class="comment">//删</span></div><div class="line">  set.forEach(<span class="function"><span class="params">item</span>=&gt;</span>item.t?set.delete(item):<span class="string">''</span>);</div><div class="line">  <span class="keyword">let</span> index = array.findIndex(<span class="function"><span class="params">item</span> =&gt;</span> item.t);</div><div class="line">  array.splice(index,<span class="number">1</span>);</div><div class="line">  <span class="built_in">console</span>.info(<span class="string">'set-array-empty'</span>,set,array);  <span class="comment">//set array-empty Set(0) &#123;&#125; []</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="comment">//map,set,object对比</span></div><div class="line">  <span class="keyword">let</span> item =&#123;<span class="attr">t</span>:<span class="number">1</span>&#125;;</div><div class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</div><div class="line">  <span class="keyword">let</span> set =<span class="keyword">new</span> <span class="built_in">Set</span>();</div><div class="line">  <span class="keyword">let</span> obj = &#123;&#125;;</div><div class="line">  <span class="comment">//增</span></div><div class="line">  map.set(<span class="string">'t'</span>,<span class="number">1</span>);</div><div class="line">  set.add(item);</div><div class="line">  obj[<span class="string">'t'</span>]= <span class="number">1</span>;</div><div class="line">  <span class="built_in">console</span>.info(<span class="string">'obj-map-set'</span>,obj,map,set);  <span class="comment">//obj-map-set &#123;t: 1&#125; Map(1) &#123;"t" =&gt; 1&#125; Set(1) &#123;&#123;…&#125;&#125;</span></div><div class="line">  <span class="comment">//查</span></div><div class="line">  <span class="built_in">console</span>.info(&#123;</div><div class="line">    <span class="attr">map_exist</span>:map.has(<span class="string">'t'</span>),</div><div class="line">    <span class="attr">set_exist</span>:set.has(item),</div><div class="line">    <span class="attr">obj_exist</span>:<span class="string">'t'</span> <span class="keyword">in</span> obj</div><div class="line">  &#125;);  <span class="comment">//&#123;map_exist: true, set_exist: true, obj_exist: true&#125;</span></div><div class="line">  <span class="comment">//改</span></div><div class="line">  map.set(<span class="string">'t'</span>,<span class="number">2</span>);</div><div class="line">  item.t =<span class="number">2</span>;</div><div class="line">  obj[<span class="string">'t'</span>]= <span class="number">2</span>;</div><div class="line">  <span class="built_in">console</span>.info(<span class="string">'obj-map-set-modify'</span>,obj,map,set);  <span class="comment">//obj-map-set-modify &#123;t: 2&#125; Map(1) &#123;"t" =&gt; 2&#125; Set(1) &#123;&#123;…&#125;&#125;</span></div><div class="line">  <span class="comment">//删除</span></div><div class="line">  map.delete(<span class="string">'t'</span>);</div><div class="line">  set.delete(item);</div><div class="line">  <span class="keyword">delete</span> obj[<span class="string">'t'</span>];</div><div class="line">  <span class="built_in">console</span>.info(<span class="string">'obj-map-set-empty'</span>,obj,map,set);  <span class="comment">//obj-map-set-empty &#123;&#125; Map(0) &#123;&#125; Set(0) &#123;&#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="11-Proxy和Reflect"><a href="#11-Proxy和Reflect" class="headerlink" title="11. Proxy和Reflect"></a>11. Proxy和Reflect</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> obj = &#123;</div><div class="line">    <span class="attr">time</span>:<span class="string">'2017-11-17'</span>,</div><div class="line">    <span class="attr">name</span>:<span class="string">'net'</span>,</div><div class="line">    <span class="attr">_r</span>:<span class="number">123</span></div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">let</span> monitor = <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj,&#123;</div><div class="line">    <span class="comment">//拦截对象属性的获取</span></div><div class="line">    get(target,key)&#123;</div><div class="line">       <span class="keyword">return</span> target[key].replace(<span class="string">'2017'</span>,<span class="string">'2018'</span>);</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">//拦截对象设置属性</span></div><div class="line">    set(target,key,value)&#123;</div><div class="line">      <span class="keyword">if</span>(key===<span class="string">'name'</span>)&#123;</div><div class="line">        <span class="keyword">return</span> target[key]=value;</div><div class="line">      &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">return</span> target[key];</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">//拦截key in object操作</span></div><div class="line">    has(target,key)&#123;</div><div class="line">      <span class="keyword">if</span>(key===<span class="string">'name'</span>)&#123;</div><div class="line">        <span class="keyword">return</span> target[key];</div><div class="line">      &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">//拦截delete操作</span></div><div class="line">    deleteProperty(target,key)&#123;</div><div class="line">      <span class="keyword">if</span>(key.indexOf(<span class="string">'_'</span>)&gt;<span class="number">-1</span>)&#123;</div><div class="line">        <span class="keyword">delete</span> target[key];</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">      &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">return</span> target[key];</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">//拦截object.keys，object.getownpropertysymbols,object.getownpropertynames</span></div><div class="line">    ownKeys(target)&#123;</div><div class="line">      <span class="keyword">return</span> <span class="built_in">Object</span>.keys(target).filter(<span class="function"><span class="params">item</span>=&gt;</span>item!=<span class="string">'time'</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'get'</span>,monitor.time);  <span class="comment">//get 2018-11-17</span></div><div class="line">  monitor.name =<span class="string">'new name'</span>;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'set'</span>,monitor.time,monitor.name);  <span class="comment">//set 2018-11-17 new name</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'has'</span>,<span class="string">'name'</span> <span class="keyword">in</span> monitor,<span class="string">'time'</span> <span class="keyword">in</span> monitor);  <span class="comment">//has true false</span></div><div class="line">  <span class="comment">// delete monitor.time;</span></div><div class="line">  <span class="comment">// console.log('delete',monitor);  //Proxy &#123;time: "2017-11-17", name: "new name", _r: 123&#125;</span></div><div class="line">  <span class="comment">// delete monitor._r;</span></div><div class="line">  <span class="comment">// console.log('delete',monitor);  //Proxy &#123;time: "2017-11-17", name: "new name"&#125;</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'ownKeys'</span>,<span class="built_in">Object</span>.keys(monitor));  <span class="comment">//ownKeys (2) ["name", "_r"]</span></div><div class="line">&#125;<span class="comment">//类似供应商的原始数据对象，通过proxy代理商生成映射对象，用户访问后者</span></div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> obj = &#123;</div><div class="line">    <span class="attr">time</span>:<span class="string">'2017-11-17'</span>,</div><div class="line">    <span class="attr">name</span>:<span class="string">'net'</span>,</div><div class="line">    <span class="attr">_r</span>:<span class="number">123</span></div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Reflect get'</span>,<span class="built_in">Reflect</span>.get(obj,<span class="string">'time'</span>));  <span class="comment">//Reflect get 2017-11-17</span></div><div class="line">  <span class="built_in">Reflect</span>.set(obj,<span class="string">'name'</span>,<span class="string">'new name'</span>);</div><div class="line">  <span class="built_in">console</span>.log(obj);  <span class="comment">//&#123;time: "2017-11-17", name: "new name", _r: 123&#125;</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'has'</span>,<span class="built_in">Reflect</span>.has(obj,<span class="string">'name'</span>));  <span class="comment">//has true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//数据校验应用</span></div><div class="line">&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">validator</span>(<span class="params">target,validator</span>)</span>&#123;</div><div class="line">    <span class="comment">//返回对target的代理，即对Person这个类的实例的代理</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(target,&#123;</div><div class="line">      <span class="attr">_validator</span>:validator,</div><div class="line">      set(target,key,value,proxy)&#123;</div><div class="line">        <span class="keyword">if</span>(target.hasOwnProperty(key))&#123;</div><div class="line">          <span class="keyword">let</span> va = <span class="keyword">this</span>._validator[key];</div><div class="line">          <span class="keyword">if</span>(!!va(value))&#123;</div><div class="line">            <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target,key,value,proxy);</div><div class="line">          &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">`不能设置<span class="subst">$&#123;key&#125;</span> 到<span class="subst">$&#123;value&#125;</span>`</span>);</div><div class="line">          &#125;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">          <span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span>不存在`</span>);</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> personValidators =&#123;</div><div class="line">    name(val)&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">typeof</span> val === <span class="string">'string'</span>;</div><div class="line">    &#125;,</div><div class="line">    age(val)&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">typeof</span> val === <span class="string">'number'</span> &amp;&amp; val &gt;<span class="number">18</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(name,age)&#123;</div><div class="line">      <span class="keyword">this</span>.name = name;</div><div class="line">      <span class="keyword">this</span>.age =age;</div><div class="line">      <span class="keyword">return</span> validator(<span class="keyword">this</span>,personValidators);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> person = <span class="keyword">new</span> Person(<span class="string">'lilei'</span>,<span class="number">30</span>);</div><div class="line">  <span class="built_in">console</span>.info(person);  <span class="comment">//Proxy &#123;name: "lilei", age: 30&#125;</span></div><div class="line">  <span class="comment">//因为代理限制所以不能随意赋值</span></div><div class="line">  <span class="comment">//person.name =48;  //Uncaught Error: 不能设置name 到48</span></div><div class="line">  person.name =<span class="string">'Han mei mei'</span>;</div><div class="line">  <span class="built_in">console</span>.info(person);  <span class="comment">//Proxy &#123;name: "Han mei mei", age: 30&#125;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="12-类和对象"><a href="#12-类和对象" class="headerlink" title="12. 类和对象"></a>12. 类和对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="comment">//基本定义和生成实例</span></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(name = 'qq') &#123;</div><div class="line">      <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">let</span> v_parent = <span class="keyword">new</span> Parent(<span class="string">'v'</span>);</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'构造函数和实例'</span>, v_parent); <span class="comment">//构造函数和实例 Parent &#123;name: "v"&#125;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(name = 'qq') &#123;</div><div class="line">      <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Parent</span> </span>&#123;</div><div class="line"></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'继承'</span>, <span class="keyword">new</span> Child()); <span class="comment">//继承 Child &#123;name: "qq"&#125;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="comment">//继承传递参数</span></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(name = 'qq') &#123;</div><div class="line">      <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Parent</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(name = 'child') &#123;</div><div class="line">      <span class="keyword">super</span>(name);</div><div class="line">      <span class="keyword">this</span>.type = <span class="string">'child'</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'继承传递参数'</span>, <span class="keyword">new</span> Child(<span class="string">'hello'</span>)); <span class="comment">//继承传递参数 _Child &#123;name: "hello", type: "child"&#125;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="comment">//getter,setter</span></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(name = 'qq') &#123;</div><div class="line">      <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    get longName() &#123;</div><div class="line">      <span class="keyword">return</span> <span class="string">'mk'</span> + <span class="keyword">this</span>.name;</div><div class="line">    &#125; <span class="comment">//不是函数方法而是属性</span></div><div class="line"></div><div class="line">    set longName(value) &#123;</div><div class="line">      <span class="keyword">this</span>.name = value;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">let</span> v = <span class="keyword">new</span> Parent();</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'getter'</span>, v.longName); <span class="comment">//getter mkqq</span></div><div class="line">  v.longName = <span class="string">'hello'</span>;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'setter'</span>, v.longName); <span class="comment">//setter mkhello</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="comment">//静态方法</span></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(name = 'qq') &#123;</div><div class="line">      <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">static</span> tell() &#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'tell'</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  Parent.tell(); <span class="comment">//tell</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="comment">//静态属性</span></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>(name = 'qq') &#123;</div><div class="line">      <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">static</span> tell() &#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'tell'</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  Parent.type = <span class="string">'test'</span>;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'静态属性'</span>, Parent.type); <span class="comment">//静态属性 test</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="13-Promise"><a href="#13-Promise" class="headerlink" title="13. Promise"></a>13. Promise</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="comment">//基本定义</span></div><div class="line">  <span class="keyword">let</span> ajax = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'execute'</span>);</div><div class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      callback &amp;&amp; callback.call()</div><div class="line">    &#125;, <span class="number">1000</span>);</div><div class="line">  &#125;;</div><div class="line">  ajax(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'timeout1'</span>);</div><div class="line">  &#125;);</div><div class="line">&#125; <span class="comment">//先输出execute，1s后输出timeout1</span></div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> ajax = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'execute2'</span>);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">      setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        resolve()</div><div class="line">      &#125;, <span class="number">1000</span>);</div><div class="line">    &#125;);</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  ajax().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'promise'</span>, <span class="string">'timeout2'</span>);</div><div class="line">  &#125;)</div><div class="line">&#125; <span class="comment">//先输出timeout1，1s后输出promise timeout2</span></div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> ajax = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'execute3'</span>);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">      setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        resolve()</div><div class="line">      &#125;, <span class="number">1000</span>);</div><div class="line">    &#125;);</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  ajax()</div><div class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">          resolve()</div><div class="line">        &#125;, <span class="number">2000</span>);</div><div class="line">      &#125;);</div><div class="line">    &#125;)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'timeout3'</span>);</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> ajax = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'execute4'</span>);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (num &gt; <span class="number">5</span>) &#123;</div><div class="line">        resolve();</div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'error!'</span>);</div><div class="line">      &#125;</div><div class="line">    &#125;);</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  ajax(<span class="number">6</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'log'</span>, <span class="number">6</span>);</div><div class="line">  &#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'catch'</span>, err);</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  ajax(<span class="number">3</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'log'</span>, <span class="number">3</span>);</div><div class="line">  &#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'catch'</span>, err);</div><div class="line">  &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="comment">//所有图片加载完再加载页面</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">loadImage</span>(<span class="params">src</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">      <span class="keyword">let</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>);</div><div class="line">      img.src = src;</div><div class="line">      img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        resolve(img);</div><div class="line">      &#125;</div><div class="line">      img.onerror = <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</div><div class="line">        reject(err);</div><div class="line">      &#125;</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">showImage</span>(<span class="params">imgs</span>) </span>&#123;</div><div class="line">    imgs.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">img</span>) </span>&#123;</div><div class="line">      <span class="built_in">document</span>.body.appendChild(img);</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="built_in">Promise</span>.all([</div><div class="line">    loadImage(<span class="string">'http://wx2.sinaimg.cn/mw690/6e67f96fgy1fkgeowvnqkj205606yjrh.jpg'</span>),</div><div class="line">    loadImage(<span class="string">'http://wx2.sinaimg.cn/mw690/6e67f96fgy1fkgeowvnqkj205606yjrh.jpg'</span>),</div><div class="line">    loadImage(<span class="string">'http://wx2.sinaimg.cn/mw690/6e67f96fgy1fkgeowvnqkj205606yjrh.jpg'</span>)</div><div class="line">  ]).then(showImage)</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="comment">//只要一张图片加载完就加载页面,其他不显示</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">loadImage</span>(<span class="params">src</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">      <span class="keyword">let</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>);</div><div class="line">      img.src = src;</div><div class="line">      img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        resolve(img);</div><div class="line">      &#125;</div><div class="line">      img.onerror = <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</div><div class="line">        reject(err);</div><div class="line">      &#125;</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">showImage</span>(<span class="params">img</span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> p = <span class="built_in">document</span>.createElement(<span class="string">'p'</span>);</div><div class="line">    p.appendChild(img);</div><div class="line">    <span class="built_in">document</span>.body.appendChild(p);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="built_in">Promise</span>.race([</div><div class="line">    loadImage(<span class="string">'http://wx2.sinaimg.cn/mw690/6e67f96fgy1fkgeowvnqkj205606yjrh.jpg'</span>),</div><div class="line">    loadImage(<span class="string">'http://wx2.sinaimg.cn/mw690/6e67f96fgy1fkgeowvnqkj205606yjrh.jpg'</span>),</div><div class="line">    loadImage(<span class="string">'http://wx2.sinaimg.cn/mw690/6e67f96fgy1fkgeowvnqkj205606yjrh.jpg'</span>)</div><div class="line">  ]).then(showImage)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="14-Iterator"><a href="#14-Iterator" class="headerlink" title="14. Iterator"></a>14. Iterator</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> arr = [<span class="string">'hello'</span>, <span class="string">'world'</span>];</div><div class="line">  <span class="keyword">let</span> map = arr[<span class="built_in">Symbol</span>.iterator]();</div><div class="line">  <span class="built_in">console</span>.log(map.next()); <span class="comment">// &#123;value: "hello", done: false&#125;</span></div><div class="line">  <span class="built_in">console</span>.log(map.next()); <span class="comment">// &#123;value: "world", done: false&#125;</span></div><div class="line">  <span class="built_in">console</span>.log(map.next()); <span class="comment">// &#123;value: undefined, done: true&#125;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="comment">//自定义iterator 返回对象包括next方法和value，done值</span></div><div class="line">  <span class="keyword">let</span> obj = &#123;</div><div class="line">    <span class="attr">start</span>: [<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>],</div><div class="line">    <span class="attr">end</span>: [<span class="number">7</span>, <span class="number">9</span>, <span class="number">8</span>],</div><div class="line">    [<span class="built_in">Symbol</span>.iterator]() &#123;</div><div class="line">      <span class="keyword">let</span> self = <span class="keyword">this</span>;</div><div class="line">      <span class="keyword">let</span> index = <span class="number">0</span>;</div><div class="line">      <span class="keyword">let</span> arr = self.start.concat(self.end);</div><div class="line">      <span class="keyword">let</span> len = arr.length;</div><div class="line">      <span class="keyword">return</span> &#123;</div><div class="line">        next() &#123;</div><div class="line">          <span class="keyword">if</span> (index &lt; len) &#123;</div><div class="line">            <span class="keyword">return</span> &#123;</div><div class="line">              <span class="attr">value</span>: arr[index++],</div><div class="line">              <span class="attr">done</span>: <span class="literal">false</span></div><div class="line">            &#125;;</div><div class="line">          &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> &#123;</div><div class="line">              <span class="attr">value</span>: arr[index++],</div><div class="line">              <span class="attr">done</span>: <span class="literal">true</span></div><div class="line">            &#125;;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;;</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> obj) &#123;</div><div class="line">    <span class="built_in">console</span>.log(key); <span class="comment">// 1;3;2;7;9;8</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> arr = [<span class="string">'hello'</span>, <span class="string">'world'</span>];</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> arr) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'value'</span>, value); <span class="comment">//value hello;value world</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="15-Genertor"><a href="#15-Genertor" class="headerlink" title="15. Genertor"></a>15. Genertor</h3><p>报错：<code>regeneratorRuntime is not defined</code><br>解决：<a href="http://babeljs.io/docs/plugins/transform-runtime/" target="_blank" rel="external">transform-runtime</a>，可以选择性加载babel插件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="comment">//generator基本定义</span></div><div class="line">  <span class="keyword">let</span> tell = <span class="function"><span class="keyword">function</span>*(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">yield</span> <span class="string">'a'</span>;</div><div class="line">    <span class="keyword">yield</span> <span class="string">'b'</span>;</div><div class="line">    <span class="keyword">return</span> <span class="string">'c'</span></div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">let</span> k = tell();</div><div class="line"></div><div class="line">  <span class="built_in">console</span>.log(k.next()); <span class="comment">//&#123;value: "a", done: false&#125;</span></div><div class="line">  <span class="built_in">console</span>.log(k.next()); <span class="comment">//&#123;value: "b", done: false&#125;</span></div><div class="line">  <span class="built_in">console</span>.log(k.next()); <span class="comment">//&#123;value: "c", done: true&#125;</span></div><div class="line">  <span class="built_in">console</span>.log(k.next()); <span class="comment">//&#123;value: undefined, done: true&#125;</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> obj = &#123;&#125;;</div><div class="line">  obj[<span class="built_in">Symbol</span>.iterator] = <span class="function"><span class="keyword">function</span>*(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">yield</span> <span class="number">1</span>;</div><div class="line">    <span class="keyword">yield</span> <span class="number">2</span>;</div><div class="line">    <span class="keyword">yield</span> <span class="number">3</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> obj) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'value'</span>, value); <span class="comment">//value 1;value 2;value 3</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// &#123;</span></div><div class="line"><span class="comment">//   //状态机</span></div><div class="line"><span class="comment">//   let state = function* ()&#123;</span></div><div class="line"><span class="comment">//     while(1)&#123;</span></div><div class="line"><span class="comment">//       yield 'A';</span></div><div class="line"><span class="comment">//       yield 'B';</span></div><div class="line"><span class="comment">//       yield 'C';</span></div><div class="line"><span class="comment">//     &#125;</span></div><div class="line"><span class="comment">//   &#125;;</span></div><div class="line"><span class="comment">//   let status  =state();</span></div><div class="line"><span class="comment">//   console.log(status.next()); //&#123;value: "A", done: false&#125;</span></div><div class="line"><span class="comment">//   console.log(status.next()); //&#123;value: "B", done: false&#125;</span></div><div class="line"><span class="comment">//   console.log(status.next()); //&#123;value: "C", done: false&#125;</span></div><div class="line"><span class="comment">//   console.log(status.next()); //&#123;value: "A", done: false&#125;</span></div><div class="line"><span class="comment">//   console.log(status.next()); //&#123;value: "B", done: false&#125;</span></div><div class="line"><span class="comment">// &#125;</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// &#123;</span></div><div class="line"><span class="comment">//   let state = async function ()&#123;</span></div><div class="line"><span class="comment">//     while(1)&#123;</span></div><div class="line"><span class="comment">//       await 'A';</span></div><div class="line"><span class="comment">//       await 'B';</span></div><div class="line"><span class="comment">//       await 'C';</span></div><div class="line"><span class="comment">//     &#125;</span></div><div class="line"><span class="comment">//   &#125;;</span></div><div class="line"><span class="comment">//   let status  =state();</span></div><div class="line"><span class="comment">//   console.log(status.then()); //&#123;value: "A", done: false&#125;</span></div><div class="line"><span class="comment">// &#125;</span></div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="comment">//制作抽奖按钮</span></div><div class="line">  <span class="keyword">let</span> draw = <span class="function"><span class="keyword">function</span>(<span class="params">count</span>) </span>&#123;</div><div class="line">    <span class="comment">//具体抽奖逻辑省略</span></div><div class="line">    <span class="built_in">console</span>.info(<span class="string">`剩余<span class="subst">$&#123;count&#125;</span>次`</span>);</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">let</span> residue = <span class="function"><span class="keyword">function</span>*(<span class="params">count</span>) </span>&#123;</div><div class="line">    <span class="keyword">while</span> (count &gt; <span class="number">0</span>) &#123;</div><div class="line">      count--;</div><div class="line">      <span class="keyword">yield</span> draw(count);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">//次数count不保存在全局变量中</span></div><div class="line">  <span class="keyword">let</span> star = residue(<span class="number">5</span>);</div><div class="line">  <span class="keyword">let</span> btn = <span class="built_in">document</span>.createElement(<span class="string">'button'</span>);</div><div class="line">  btn.id = <span class="string">'start'</span>;</div><div class="line">  btn.textContent = <span class="string">'抽奖'</span>;</div><div class="line">  <span class="built_in">document</span>.body.appendChild(btn);</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'start'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    star.next();</div><div class="line">  &#125;, <span class="literal">false</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="comment">//长轮询</span></div><div class="line">  <span class="keyword">let</span> ajax = <span class="function"><span class="keyword">function</span>*(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">yield</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">      setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        resolve(&#123;</div><div class="line">          <span class="attr">code</span>: <span class="number">0</span></div><div class="line">        &#125;)</div><div class="line">      &#125;, <span class="number">200</span>);</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">let</span> pull = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> generator = ajax();</div><div class="line">    <span class="keyword">let</span> step = generator.next();</div><div class="line">    step.value.then(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (d.code != <span class="number">0</span>) &#123;</div><div class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">          <span class="built_in">console</span>.info(<span class="string">'wait'</span>);</div><div class="line">          pull()</div><div class="line">        &#125;, <span class="number">1000</span>);</div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">console</span>.info(d);</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">  pull(); <span class="comment">//如果code改成1则会开始长轮询输出wait</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="16-Decorators"><a href="#16-Decorators" class="headerlink" title="16. Decorators"></a>16. Decorators</h3><p>修饰器是一个函数用来修改类的行为。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> readonly = <span class="function"><span class="keyword">function</span>(<span class="params">target, name, descriptor</span>) </span>&#123;</div><div class="line">    descriptor.writable = <span class="literal">false</span>;</div><div class="line">    <span class="keyword">return</span> descriptor</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</div><div class="line">    @readonly</div><div class="line">    time() &#123;</div><div class="line">      <span class="keyword">return</span> <span class="string">'2017-03-11'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">let</span> test = <span class="keyword">new</span> Test();</div><div class="line"></div><div class="line">  <span class="comment">// test.time=function()&#123;</span></div><div class="line">  <span class="comment">//   console.log('reset time');</span></div><div class="line">  <span class="comment">// &#125;;</span></div><div class="line"></div><div class="line">  <span class="built_in">console</span>.log(test.time());</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> typename = <span class="function"><span class="keyword">function</span>(<span class="params">target, name, descriptor</span>) </span>&#123;</div><div class="line">    target.myname = <span class="string">'hello'</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  @typename</div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</div><div class="line"></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'类修饰符'</span>, Test.myname);</div><div class="line">  <span class="comment">// 第三方库修饰器的js库：core-decorators; npm install core-decorators</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="17-模块化"><a href="#17-模块化" class="headerlink" title="17. 模块化"></a>17. 模块化</h3><h3 id="18-问题"><a href="#18-问题" class="headerlink" title="18. 问题"></a>18. 问题</h3><pre><code>描述：当使用import导入模块时，出现exports is not defined
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//1、安装插件</div><div class="line">npm install --save-dev babel-plugin-transform-es2015-modules-umd</div><div class="line"> </div><div class="line">//2、设置.babelrc配置文件</div><div class="line">&#123;</div><div class="line">    &quot;plugins&quot;: [&quot;transform-es2015-modules-umd&quot;]</div><div class="line">&#125;</div></pre></td></tr></table></figure>

        </div>
        
<blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2018-03-05T04:18:37.526Z" itemprop="dateUpdated">2018-03-05 12:18:37</time>
</span><br>


        
        转载注明出处，原文地址：<a href="/2018/02/28/ES6_ES2015语法及Babel/" target="_blank" rel="external">https://renkoq.github.io/2018/02/28/ES6_ES2015语法及Babel/</a>
        
    </div>
    <footer>
        <a href="https://renkoq.github.io">
            <img src="/img/avatar.jpg" alt="Renko">
            Renko
        </a>
    </footer>
</blockquote>

        
        
        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://renkoq.github.io/2018/02/28/ES6_ES2015语法及Babel/&title=《ES6/ES2015语法及Babel》 — Renko's blog&pic=https://renkoq.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://renkoq.github.io/2018/02/28/ES6_ES2015语法及Babel/&title=《ES6/ES2015语法及Babel》 — Renko's blog&source=偶然在项目中看见，感觉是重要的内容，先了解下基本语法，等有空再深入学习。babel迷之安装 一觉醒来打开webstorm发现装上了Σ(っ °Д °;)っF..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《ES6/ES2015语法及Babel》 — Renko's blog&url=https://renkoq.github.io/2018/02/28/ES6_ES2015语法及Babel/&via=https://renkoq.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://renkoq.github.io/2018/02/28/ES6_ES2015语法及Babel/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
            
    <div id="comment"></div>


        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/03/03/函数节流&防抖/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">函数节流&amp;防抖</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/02/03/响应式开发/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">响应式开发总结</h4>
      </a>
    </div>
  
</nav>


    
</article>


</div>

        <footer class="footer">
    
    <div class="bottom">
        <p>
            <span>
                Renko &copy; 2016 - 2018
            </span>
        		
           	
            
            
            <span>
	            Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/codefine/hexo-theme-mellow" target="_blank">mellow</a>
            </span>
            
            
            
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://renkoq.github.io/2018/02/28/ES6_ES2015语法及Babel/&title=《ES6/ES2015语法及Babel》 — Renko's blog&pic=https://renkoq.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://renkoq.github.io/2018/02/28/ES6_ES2015语法及Babel/&title=《ES6/ES2015语法及Babel》 — Renko's blog&source=偶然在项目中看见，感觉是重要的内容，先了解下基本语法，等有空再深入学习。babel迷之安装 一觉醒来打开webstorm发现装上了Σ(っ °Д °;)っF..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《ES6/ES2015语法及Babel》 — Renko's blog&url=https://renkoq.github.io/2018/02/28/ES6_ES2015语法及Babel/&via=https://renkoq.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://renkoq.github.io/2018/02/28/ES6_ES2015语法及Babel/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACMUlEQVR42u3aQW7DMAwF0dz/0i7QVYFWynzSKWBqtCoSV9LzghFJvV54XN9j9fnPsfr29zzk+ZuHDBkyHsu4toNsl8yz3zRfd7kHGTJkHMDYB1kSOsk8tZnRD4AMGTJkAEAtvPK1ZMiQIYMz0iSWPy9DhgwZewYPiGm9K01xP56Ly5Ah44GMtDHwn39/sL8hQ4aMhzCucPCSWf+ZYFcyZMgYzdgnljzwkeMaSYNba8mQIeMYBoGR0j8vt/H09Q1GhgwZQxm1IMiLXxzGWw7LE64MGTJGM/gytRZCp+gfdzZkyJAxlNFpD6SHv35CG/xuyJAhYxCDJ5O8xF97NTyVlSFDxjkMHkb59Qv+TFqee/MKZMiQMZrBm4W1diMPsvz1BTuRIUPGwxn74yAvmfGmY2f+5bcyZMg4gJEW7mvpKDkOklbBH/PLkCHjAAZPKTsHxGBbuCEhQ4aMcxi8NN/Jj9MrGsGLkCFDxmGMtCaXXrlI26WoCSFDhozRjFpjoHbs67dL0zAtQ4aMGYxa4loLyvwoGTcYZMiQcRijtljxNkcpuZUhQ8ZpjE6imAbKdLZig0GGDBnjGFc4+KUKEpTTwL38LxkyZIxm1AJiegmj85ruDesyZMh4LoNPvQ+LdyW9/HMZMmScxuBBlkTuWsuhle7KkCFDRikd7VzgSC9eyJAhQ0atBJZeyCBBfDmzDBkyDmDwJLZToOfls7RIJ0OGjNmMTmMghfHjIw/0MmTIGM34AuIGzFIXRLcgAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="//cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.1.2"></script>

<script type="text/javascript" src="https://cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script type="text/javascript" src="/js/method.js?v=1.1.2"></script>
<script type="text/javascript" src="/js/blog.js?v=1.1.2"></script>

<!-- third-party -->





<script type="text/javascript" src="/js/plugins/local_search.js?v=1.1.2"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



    
        <script type="text/javascript" src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script type="text/javascript" src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script type="text/javascript" src="/js/plugins/valine.js?v=1.1.2"></script>
    



<script type="text/javascript" src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
<script type="text/javascript" src="/js/plugins/leancloud_visitors.js?v=1.1.2"></script>



    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>




    
</body>
</html>
