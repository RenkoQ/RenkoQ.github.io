<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    
    <title>git版本控制 | Renko&#39;s blog | 人生如逆旅，我亦是行人</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="工具">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.1.2">
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":true,"app_id":"BG0bK4DLNxackBrBBd7M3TOI-gzGzoHsz","app_key":"ji1U1fUbF7iiD8xufT3rvonA","icon":true}'),
            v: JSON.parse('{"enable":true,"appid":"BG0bK4DLNxackBrBBd7M3TOI-gzGzoHsz","appkey":"ji1U1fUbF7iiD8xufT3rvonA","notify":false,"verify":true,"placeholder":"欢迎留言...","avatar":"wavatar"}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
</head>


<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Renko</h5>
          <a href="mailto:fqx2@outlook.com" title="fqx2@outlook.com" class="mail">fqx2@outlook.com</a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://github.com/RenkoQ" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                关于
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/friend"  >
                <i class="icon icon-lg icon-group"></i>
                友链
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://sunnyfu.cn"  >
                <i class="icon icon-lg icon-anchor"></i>
                简历
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>git版本控制</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header" style="background-image: url(img/banner.jpg)">
    <div class="container fade-scale">
        <h1 class="title">git版本控制</h1>
        <h5 class="subtitle">
            
                <time datetime="2016-11-30T16:01:00.000Z" itemprop="datePublished" class="page-time">
  2016-12-01
</time>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-git版本控制"
  class="post-article article-type-post fade" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">git版本控制</h1>
        <div class="post-meta">
            <time class="post-time" title="2016-12-01 00:01:00" datetime="2016-11-30T16:01:00.000Z"  itemprop="datePublished">2016-12-01</time>

            


            
	<span id="/2016/12/01/git版本控制/" class="leancloud_visitors" data-flag-title="git版本控制" title="git版本控制">
		
			<i class="icon icon-eye"></i>
		
		<span class="leancloud-visitors-count"></span>
	</span>
 

            
    <span>
        <i class="icon icon-comment-o"></i>
        <a href="/2016/12/01/git版本控制/#comment">
            <span class="valine-comment-count" data-xid="/2016/12/01/git版本控制/"></span>
        </a>
    </span>


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h3 id="1-版本控制类型"><a href="#1-版本控制类型" class="headerlink" title="1. 版本控制类型"></a>1. 版本控制类型</h3><p>版本控制系统模型包括两大主要类型：</p>
<ul>
<li>集中式模型 - 所有用户都连接到一个中央的主仓库（master repository）</li>
<li>分布式模型 - 每个用户都在自己的计算机上拥有完整的仓库</li>
</ul>
<p><a href="https://www.atlassian.com/blog/software-teams/version-control-centralized-dvcs" target="_blank" rel="external">What is version control: centralized vs. DVCS</a><br><a href="https://zh.wikipedia.org/wiki/%E5%88%86%E6%95%A3%E5%BC%8F%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6" target="_blank" rel="external">分散式版本控制</a></p>
<h3 id="2-术语"><a href="#2-术语" class="headerlink" title="2. 术语"></a>2. 术语</h3><p><strong>版本控制系统 / 源代码管理器</strong><br><code>版本控制系统</code>（简称<code>VCS</code>）是一个管理源代码不同版本的工具。<code>源代码管理器</code>（简称 <code>SCM</code>）是版本控制系统的另一个名称。</p>
<p>Git 是一个 SCM（因此也是 VCS！）。Git 网站的 URL 是 <a href="https://git-scm.com/" target="_blank" rel="external">https://git-scm.com/</a> （注意它的域名中直接包含“SCM”！）。</p>
<p><strong>提交（Commit）</strong><br>Git 将数据看做微型文件系统的一组快照。每次 <code>commit</code>（在 Git 中保持项目状态），它都对文件当时的状况拍照，并存储对该快照的引用。你可以将其看做游戏中的保存点，它会保存项目的文件和关于文件的所有信息。</p>
<p>你在 Git 中的所有操作都是帮助你进行 commit，因此 commit 是 Git 中的基本单位。</p>
<p><strong>仓库（Repository / repo）</strong><br>仓库是一个包含项目内容以及几个文件（在 Mac OS X 上默认地处于隐藏状态）的目录，用来与 Git 进行通信。仓库可以存储在本地，或作为远程副本存储在其他计算机上。仓库是由 commit 构成的。</p>
<p><strong>工作目录 / 工作区（Working Directory）</strong><br>工作目录是你在计算机的文件系统中看到的文件。当你在代码编辑器中打开项目文件时，你是在工作目录中处理文件。</p>
<p>与这些文件形成对比的是保持在仓库中（在 commit 中！）的文件。</p>
<p>在使用 Git 时，工作目录与命令行工具的 <code>current working directory</code> （当前工作目录）不一样，后者是 shell 当前正在查看的目录。</p>
<p><strong>检出（Checkout）</strong><br>检出是指将仓库中的内容复制到工作目录下。</p>
<p><strong>暂存区 / 暂存索引 / 索引（Staging Area / Staging Index / Index）</strong><br>Git 目录下的一个文件，存储的是即将进入下个 commit 内容的信息。可以将暂存区看做准备工作台，Git 将在此区域获取下个 commit。暂存索引中的文件是准备添加到仓库中的文件。</p>
<p><strong>SHA</strong><br>SHA 是每个 commit 的 ID 编号。以下是 commit 的 SHA 示例：e2adf8ae3e2e4ed40add75cc44cf9d0a869afeb6。</p>
<p>它是一个长 40 个字符的字符串（由 0–9 和 a–f 组成），并根据 Git 中的文件或目录结构的内容计算得出。SHA 的全称是”Secure Hash Algorithm”（安全哈希算法）。</p>
<p><strong>分支（Branch）</strong><br>分支是从主开发流程中分支出来的新的开发流程。这种分支开发流程可以在不更改主流程的情况下继续延伸下去。</p>
<p>回到之前关于游戏保存点的示例，你可以将分支看做在游戏中设立保存点后，尝试一个有风险的招式。如果有风险的招式不奏效，则回到保存的位置。令分支非常强大的关键之处是你可以在一个分支上设定保存点，然后切换到另一个分支并继续设定保存点。</p>
<h3 id="3-git设置"><a href="#3-git设置" class="headerlink" title="3. git设置"></a>3. git设置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"># 设置你的 Git 用户名</div><div class="line">git config --global user.name &quot;&lt;Your-Full-Name&gt;&quot;</div><div class="line"></div><div class="line"># 设置你的 Git 邮箱</div><div class="line">git config --global user.email &quot;&lt;your-email-address&gt;&quot;</div><div class="line"></div><div class="line"># 确保 Git 输出内容带有颜色标记</div><div class="line">git config --global color.ui auto</div><div class="line"></div><div class="line"># 对比显示原始状态</div><div class="line">git config --global merge.conflictstyle diff3</div><div class="line"></div><div class="line">git config --list</div></pre></td></tr></table></figure>
<p>Atom Editor 设置</p>
<pre><code>git config --global core.editor &quot;atom --wait&quot;
</code></pre><h3 id="3-git-init"><a href="#3-git-init" class="headerlink" title="3. git init"></a>3. git init</h3><p>运行 <code>git init</code> 命令会初始化 Git 跟踪所有内容会用到的所有必要文件和目录。所有这些文件都存储在叫做 <code>.git</code>（隐藏目录）的目录下。这个<code>.git</code> 目录是一个库！Git 会将所有 <code>commit</code> 记录在这里，并跟踪所有内容！</p>
<p><strong>.git 目录内容</strong></p>
<ul>
<li>配置文件 - 存储了所有与项目有关的配置设置。</li>
<li>description 文件 - 此文件仅用于 GitWeb 程序，因此可以忽略</li>
<li>hooks 目录 - 我们会在此处放置客户端或服务器端脚本，以便用来连接到 Git 的不同生命周期事件</li>
<li>info 目录 - 包含全局排除文件</li>
<li>objects 目录 - 此目录将存储我们提交的所有 commit</li>
<li>refs 目录 - 此目录存储了指向 commit 的指针（通常是“分支”和“标签”）</li>
</ul>
<p><a href="https://git-scm.com/book/en/v2/Git-Internals-Plumbing-and-Porcelain" target="_blank" rel="external">Git 内部原理 - 底层命令和高层命令</a></p>
<p><a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks" target="_blank" rel="external">自定义 Git - Git Hooks</a></p>
<p><a href="https://www.atlassian.com/git/tutorials/setting-up-a-repository" target="_blank" rel="external">在现有目录中初始化仓库</a><br><a href="https://git-scm.com/docs/git-init" target="_blank" rel="external">git init 文档</a><br><a href="https://git-scm.com/book/en/v2/Git-Basics-Getting-a-Git-Repository#Initializing-a-Repository-in-an-Existing-Directory" target="_blank" rel="external">git init 教程</a></p>
<h3 id="4-git-clone"><a href="#4-git-clone" class="headerlink" title="4. git clone"></a>4. git clone</h3><p><strong>验证终端位置</strong><br>提示：在克隆任何内容之前，确保命令行工具已定位于正确的目录下。克隆项目会新建一个目录，并将克隆的 Git 仓库放在其中。问题是无法创建嵌套的 Git 仓库。因此，确保终端的当前工作目录没有位于 Git 仓库中。如果当前工作目录没有在 shell 的提示符中显示，输入 pwd 输出工作目录。</p>
<p>git clone 命令用于创建一个与现有仓库完全相同的副本。</p>
<pre><code>$ git clone &lt;path-to-repository-to-clone&gt;
</code></pre><p>该命令：</p>
<ul>
<li>会获取现有仓库的路径</li>
<li>默认地将创建一个与被克隆的仓库名称相同的目录</li>
<li>可以提供第二个参数，作为该目录的名称</li>
<li>将在现有工作目录下创建一个新的仓库</li>
</ul>
<p><a href="https://git-scm.com/book/en/v2/Git-Basics-Getting-a-Git-Repository#Cloning-an-Existing-Repository" target="_blank" rel="external">克隆现有仓库</a><br><a href="https://git-scm.com/docs/git-clone" target="_blank" rel="external">git 克隆文档</a><br><a href="https://www.atlassian.com/git/tutorials/setting-up-a-repository" target="_blank" rel="external">git 克隆教程</a></p>
<a id="more"></a> 
<h3 id="5-git-status"><a href="#5-git-status" class="headerlink" title="5. git status"></a>5. git status</h3><p>git status 是了解 Git 的核心所在。它将告诉我们 Git 正在考虑什么，以及 Git 所看到的我们仓库的状态。</p>
<pre><code>$ git status
</code></pre><p>证明此仓库尚无任何 commit,此处fatal为git程序正在退出</p>
<pre><code>$ git log
fatal: your current branch &apos;master&apos; does not have any commits yet
</code></pre><p><a href="https://git-scm.com/book/en/v2/Git-Basics-Recording-Changes-to-the-Repository#Checking-the-Status-of-Your-Files" target="_blank" rel="external">查看文件的状态</a><br><a href="https://git-scm.com/docs/git-status" target="_blank" rel="external">git status 文档</a><br><a href="https://www.atlassian.com/git/tutorials/inspecting-a-repository/git-status" target="_blank" rel="external">git status 教程</a></p>
<h3 id="6-git-log"><a href="#6-git-log" class="headerlink" title="6. git log"></a>6. git log</h3><p>git log 命令用于显示仓库中所有 commit 的信息。<br>默认情况下，该命令会显示仓库中每个 commit 的：<strong><em>SHA、作者、日期、消息</em></strong>。</p>
<pre><code>$ git log
</code></pre><p>在命令行上使用分页器了解日志内容：</p>
<ul>
<li>要向下滚动，按下</li>
</ul>
<ol>
<li><code>j</code> 或 <code>↓</code> 一次向下移动一行</li>
<li><code>d</code>按照一半的屏幕幅面移动</li>
<li><code>f</code> 按照整个屏幕幅面移动</li>
</ol>
<ul>
<li>要 向上滚动，按下</li>
</ul>
<ol>
<li>k 或 ↑ 一次向上移动一行</li>
<li>u 按照一半的屏幕幅面移动</li>
<li>b 按照整个屏幕幅面移动</li>
</ol>
<ul>
<li>按下 q 可以退出日志（返回普通的命令提示符）</li>
</ul>
<p><code>ls</code>命令将列出当前目录下的所有文件。<code>ls -l</code>会显示 long 格式的信息（-l 表示 long）。</p>
<p>只显示7位SHA和commit消息：</p>
<pre><code>$ git log --oneline
</code></pre><p>显示 commit 中更改的文件以及添加或删除的行数：</p>
<pre><code>$ git log --stat
</code></pre><p>显示对文件作出实际更改的选项。该选项是 –patch，可以简写为 -p：</p>
<pre><code>$ git log -p
</code></pre><p><img src="https://s3.cn-north-1.amazonaws.com.cn/u-img/aa74d1b2-bb34-474c-9417-483de85e389b" alt="git log -p"></p>
<p>🔵 - 正在显示的文件<br>🔶 - 文件第一版的哈希值和第二版的哈希值<br>通常不重要，因此可以忽略<br>❤️ - 文件的旧版本和当前版本<br>🔍 - 添加的行所在的位置以及添加了多少行</p>
<ul>
<li>-15,83 表示旧版本（用 - 表示）从第 15 行开始，文件有 83 行</li>
<li>+15,85 表示当前版本（用 + 表示）从第 15 行开始，现在有 85 行…这 85 行显示在下方</li>
</ul>
<p>✏️ - 在 commit 中实际进行的更改</p>
<ul>
<li>用红色标示并以减号 (-) 开头的行是位于文件原始版本中，但是被 commit 删除的行</li>
<li>用绿色标示并以加号 (+) 开头的行是 commit 新加的行</li>
</ul>
<p><a href="https://git-scm.com/docs/git-diff#_generating_patches_with_p" target="_blank" rel="external">使用 -p 生成补丁</a> </p>
<p>统计信息显示在补丁上方</p>
<pre><code>git log -p --stat 
</code></pre><p><a href="https://git-scm.com/docs/git-diff" target="_blank" rel="external">git-diff文档</a></p>
<h3 id="7-git-show"><a href="#7-git-show" class="headerlink" title="7.git show"></a>7.git show</h3><p>提供 commit 的 SHA 作为最后一个参数，例如：</p>
<pre><code>$ git log -p fdf5493
</code></pre><p>通过提供 SHA，<code>git log -p</code> 命令将从这条 commit 开始！无需滚动并逐条查阅！注意，它还会显示在所提供的 SHA 之前提交的所有 commit 信息。</p>
<p>显示特定的<strong><em>一个</em></strong> commit 的命令是 git show：</p>
<pre><code>$ git show
</code></pre><p>运行上述示例命令将仅显示最近的 commit。通常，将 SHA 作为最后一个参数提供给命令：</p>
<pre><code>$ git show fdf5493
</code></pre><p>默认情况下，git show 会显示：<br><strong><em>commit、作者、日期、commit 消息、补丁信息</em></strong></p>
<p>但是，git show 可以与我们了解过的大部分其他选项一起使用：</p>
<ul>
<li><p><code>--stat</code>  显示更改了多少文件，以及添加/删除的行数</p>
</li>
<li><p><code>-p</code> 或 <code>--patch</code>  显示默认补丁信息，但是如果使用了 </p>
</li>
<li><p><code>--stat</code>将不显示补丁信息，因此传入 <code>-p</code> 以再次添加该信息</p>
</li>
<li><p><code>-w</code> 忽略空格变化</p>
</li>
</ul>
<h3 id="8-git-add"><a href="#8-git-add" class="headerlink" title="8. git add"></a>8. git add</h3><p>git add 命令用于将文件从工作目录移到暂存区。</p>
<pre><code>$ git add &lt;file1&gt; &lt;file2&gt; … &lt;fileN&gt;
</code></pre><p><code>Changes to be committed</code>下方的帮助文本提示<code>git rm --cached</code>， 不会破坏任何属于你的文件，它只是从暂存区删掉了文件。</p>
<p>句点<code>.</code>指代当前目录，可以用来表示所有文件和目录（包括所有嵌套文件和目录</p>
<pre><code>$ git add .
</code></pre><h3 id="9-git-commit"><a href="#9-git-commit" class="headerlink" title="9. git commit"></a>9. git commit</h3><p>git commit 命令会取出暂存区的文件并保存到仓库中：</p>
<pre><code>$ git commit
</code></pre><p>直接在命令行中使用 -m 选项传入信息：</p>
<pre><code>$ git commit -m &quot;Initial commit&quot;
</code></pre><p>在上述示例中，文本”Initial commit”被作为提交说明信息。但是注意，不能为 commit 提供信息的描述（description），只能提供信息部分（message）。</p>
<p><a href="https://help.github.com/articles/associating-text-editors-with-git/" target="_blank" rel="external">将文本编辑器与 git 相关联</a> GitHub 帮助文档<br><a href="https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup" target="_blank" rel="external">使用入门 - 第一次设置 git</a> git 图书</p>
<h3 id="10-git-diff"><a href="#10-git-diff" class="headerlink" title="10. git diff"></a>10. git diff</h3><p>查看已经执行但是尚未 commit 的更改：</p>
<pre><code>$ git diff
</code></pre><p>运行结果和<code>git log -p</code>一样</p>
<p><a href="https://git-scm.com/docs/git-diff" target="_blank" rel="external">git diff文档</a></p>
<h3 id="11-gitignore"><a href="#11-gitignore" class="headerlink" title="11.  .gitignore"></a>11.  .gitignore</h3><p>将某个文件保留在项目的目录结构中，确保它不会意外地提交到项目中。<br>可以使用名称特殊的文件 <code>.gitignore</code>（注意文件名开头的点，很重要！）。将此文件添加到项目中隐藏的 <code>.git</code> 目录。你只需列出希望 git ignore（忽略，不跟踪）的文件名，git 将忽略这些文件。</p>
<p><a href="https://en.wikipedia.org/wiki/Glob_%28programming%29" target="_blank" rel="external">通配符glob</a><br>通配符允许你使用特殊的字符来表示某些格式/字符。在 .gitignore 文件中，你可以使用：</p>
<ul>
<li>空白行作为空格</li>
<li><code>#</code> 将行标记为注释</li>
<li><code>*</code> 与 0 个或多个字符匹配</li>
<li><code>?</code> 与 1 个字符匹配</li>
<li><code>[abc]</code> 与 a、b 或 c 匹配</li>
<li><code>**</code> 与嵌套目录匹配 <code>a/**/z</code> 与以下项匹配<br>a/z<br>a/b/z<br>a/b/c/z</li>
</ul>
<p>因此如果所有 50 个图片都是 JPEG 图片，并且位于”samples”文件夹中，那么我们可以向 .gitignore 中添加以下行，使 git 忽略所有这 50 个图片。</p>
<pre><code>samples/*.jpg
</code></pre><p><a href="https://git-scm.com/book/en/v2/Git-Basics-Recording-Changes-to-the-Repository#Ignoring-Files" target="_blank" rel="external">忽略文件</a> git 图书<br><a href="https://git-scm.com/docs/gitignore#_pattern_format" target="_blank" rel="external">gitignore</a> git 文档<br><a href="https://help.github.com/articles/ignoring-files/" target="_blank" rel="external">忽略文件</a> GitHub 文档<br><a href="https://www.gitignore.io/" target="_blank" rel="external">gitignore.io</a></p>
<h3 id="12-git-tag"><a href="#12-git-tag" class="headerlink" title="12. git tag"></a>12. git tag</h3><p>与仓库的标签进行交互：</p>
<pre><code>$ git tag -a v1.0
</code></pre><p><code>-a</code> 选项告诉 git 创建一个带注释的标签。如果是<code>git tag v1.0</code>，那么它将创建一个轻量级标签。</p>
<p>应该始终使用带注释的标签，因为它们包含了大量的额外信息，例如：</p>
<ul>
<li>标签创建者</li>
<li>标签创建日期</li>
<li>标签消息</li>
</ul>
<p><strong>git log 的 –decorate 选项</strong><br><code>--decorate</code> 选项将显示默认视图隐藏起来的一些详情。<br>log 命令已改为自动启用 –decorate 选项。</p>
<p>删除 git 标签：</p>
<pre><code>$ git tag -d v1.0
</code></pre><p>向以前的 commit 添加标签<br>运行 git tag -a v1.0 将为最近的 commit 添加标签。<br>提供要添加标签的 commit 的 SHA 即可向仓库中很久之前的 Commit 添加标签。</p>
<pre><code>$ git tag -a v1.0 a87984
</code></pre><p><a href="https://git-scm.com/book/en/v2/Git-Basics-Tagging" target="_blank" rel="external">git 基础知识 - 添加标签</a> git 图书<br><a href="https://git-scm.com/docs/git-tag" target="_blank" rel="external">git tag</a> git 文档</p>
<h3 id="13-git-branch"><a href="#13-git-branch" class="headerlink" title="13. git branch"></a>13. git branch</h3><p>与 git 的分支进行交互。</p>
<p><strong>列出所有分支</strong>：</p>
<pre><code>$ git branch
</code></pre><p>要<strong>创建分支</strong>，只需使用 git branch 并提供要创建的分支对应的名称。<br>例如：创建一个叫做”sidebar”的分支：</p>
<pre><code>$ git branch sidebar
</code></pre><p>要<strong>在分支之间进行切换</strong>，我们需要使用 git 的 <code>checkout</code> 命令。</p>
<pre><code>$ git checkout sidebar
</code></pre><p>运行该命令将：</p>
<ul>
<li>从工作目录中删除 git 跟踪的所有文件和目录（git 跟踪的文件存储在仓库中，因此什么也不会丢失）</li>
<li>转到仓库，并提取分支指向的 commit 所对应的所有文件和目录</li>
</ul>
<p>因此此命令将删除 master 分支中的 commit 引用的所有文件。它会将这些文件替换为 sidebar 分支中的 commit 引用的文件。</p>
<p>判断<strong>活跃分支</strong>的最快速方式是查看 git branch 命令的输出结果。活跃分支名称旁边会显示一个星号。</p>
<p><strong>删除给出的分支</strong>（这里是”sidebar”分支）:</p>
<pre><code>$ git branch -d sidebar
</code></pre><p>注意，无法删除当前所在的分支。因此要删除 sidebar 分支，你需要切换到 master 分支，或者创建并切换到新的分支。</p>
<p><strong>强制删除</strong>，需要使用大写的 D 选项  </p>
<pre><code>$ git branch -D sidebar
</code></pre><p><code>git checkout</code> 命令也可以<strong>创建一个新的分支</strong>。<br>如果你添加 -b 选项，则能够用一个命令创建分支并切换到该分支。添加 master 让此 footer 分支的起点位置与 master 分支的一样。</p>
<pre><code>$ git checkout -b newbranchname master
</code></pre><p><strong>同时查看所有分支</strong>：</p>
<pre><code>$ git log --oneline --decorate --graph --all
</code></pre><p><code>--graph</code> 选项将条目和行添加到输出的最左侧。显示了实际的分支。–all 选项会显示仓库中的所有分支。</p>
<p><a href="https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging" target="_blank" rel="external">git 分支 - 分支的新建与合并</a> git 文档<br><a href="http://learngitbranching.js.org/" target="_blank" rel="external">了解 git 分支</a><br><a href="https://www.atlassian.com/git/tutorials/using-branches" target="_blank" rel="external">git 分支教程</a> Atlassian 博客</p>
<h3 id="14-git-merge"><a href="#14-git-merge" class="headerlink" title="14. git merge"></a>14. git merge</h3><p><strong>合并分支</strong>：</p>
<pre><code>$ git merge &lt;other-branch&gt;
</code></pre><p>将分支组合到一起称为合并。</p>
<p>git 可以自动将不同分支上的更改合并到一起。这种分支和合并功能正是 git 的强大之处！你可以在分支上做出小的或大的更改，然后使用 git 合并这些更改。</p>
<p>发生合并时，git 将：</p>
<ul>
<li>查看将合并的分支</li>
<li>查看分支的历史记录并寻找两个分支的 commit 历史记录中都有的单个 commit</li>
<li>将单个分支上更改的代码行合并到一起</li>
<li>提交一个 commit 来记录合并操作</li>
</ul>
<p><strong>撤消合并</strong>：</p>
<pre><code>$ git reset --hard HEAD^
</code></pre><p>（确保包含 ^ 字符！它属于“相对 commit 引用”并表示“父 级 commit”）</p>
<p><strong>快进合并</strong></p>
<p>快进合并将使当前检出的分支向前移动，直到它指向与另一个分支（这里是 footer）指向的 commit 一样为止。</p>
<p>要合并 footer 分支，运行：</p>
<pre><code>$ git merge footer
</code></pre><p><a href="https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging#Basic-Merging" target="_blank" rel="external">分支合并</a> git 图书<br><a href="https://git-scm.com/docs/git-merge" target="_blank" rel="external">git-merge</a> git 文档<br><a href="https://www.atlassian.com/git/tutorials/git-merge" target="_blank" rel="external">git 合并</a> Atlassian 博客</p>
<h3 id="15-合并冲突"><a href="#15-合并冲突" class="headerlink" title="15. 合并冲突"></a>15. 合并冲突</h3><p>git 会跟踪文件中的代码行。如果完全相同的行在不同的文件中更改了，将产生合并冲突。</p>
<p>冲突指示符（例如 <code>&gt;&gt;&gt;</code> 和 <code>&lt;&lt;&lt;</code>）</p>
<p>要解决文件中的冲突：</p>
<ol>
<li>找到并删掉存在合并冲突指示符的所有行</li>
<li>决定保留哪些行</li>
<li>保存文件</li>
<li>暂存文件</li>
<li>提交 commit</li>
</ol>
<p><a href="https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging#Basic-Merge-Conflicts" target="_blank" rel="external">遇到冲突时的分支合</a>并 git 图书<br><a href="https://git-scm.com/docs/git-merge#_how_conflicts_are_presented" target="_blank" rel="external">冲突如何被显示</a> git 文档</p>
<h3 id="16-commit更改、还原、重置"><a href="#16-commit更改、还原、重置" class="headerlink" title="16. commit更改、还原、重置"></a>16. commit更改、还原、重置</h3><p><strong>更改最近的 commit</strong>、<strong>包含忘记包含的文件（或文件更改）</strong>：</p>
<pre><code>$ git commit --amend
</code></pre><p>如果你的工作目录没有内容（也就是仓库中没有任何未 commit 的更改），那么运行 git commit –amend 将使你能够重新提供 commit 消息。代码编辑器将打开，并显示原始 commit 消息。只需纠正拼错的单词或重新表述即可！然后保存文件并关闭编辑器，以便采用新的 commit 消息。</p>
<p>可以运行 git commit –amend 来更新最近的 commit，而不是创建新的 commit。</p>
<p><strong>还原（revert） 具体的 commit</strong>：</p>
<pre><code>$ git revert &lt;SHA-of-commit-to-revert&gt;
</code></pre><p>此命令：将撤消目标 commit 所做出的更改，创建一个新的 commit 来记录这一更改。</p>
<p><a href="https://git-scm.com/docs/git-revert" target="_blank" rel="external">git-revert</a> git 文档<br><a href="https://www.atlassian.com/git/tutorials/undoing-changes" target="_blank" rel="external">git revert</a> Atlassian 教程</p>
<p><strong>重置（清除）commit</strong>：</p>
<pre><code>$ git reset &lt;reference-to-commit&gt;
</code></pre><p>可以用来：</p>
<ul>
<li>将 HEAD 和当前分支指针移到目标 commit</li>
<li>清除 commit</li>
<li>将 commit 的更改移到暂存区</li>
<li>取消暂存 commit 的更改</li>
</ul>
<p>还原（revert） 会创建一个新的 commit，并还原或撤消之前的 commit。但是重置（reset）会清除 commit！</p>
<p>一定要谨慎使用 git 的重置功能。这是少数几个可以从仓库中清除 commit 的命令。如果某个 commit 不再存在于仓库中，它所包含的内容也会消失。</p>
<p>为了减轻你的压力，澄清下，git 会在完全清除任何内容之前，持续跟踪大约 30 天。要调用这些内容，你需要使用 git reflog 命令。请参阅以下链接以了解详情：<br><a href="https://git-scm.com/docs/git-reflog" target="_blank" rel="external">git-reflog</a><br><a href="https://www.atlassian.com/git/tutorials/rewriting-history" target="_blank" rel="external">重写历史记录</a><br><a href="http://gitready.com/intermediate/2009/02/09/reflog-your-safety-net.html" target="_blank" rel="external">reflog，你的安全屏障</a></p>
<p>备份分支<br>注意，使用 git reset 命令将清除当前分支上的 commit。因此，如果你想跟着操作接下来出现的所有重置操作，需要在当前 commit 上创建一个分支，以便用作备份。</p>
<p>在进行任何重置操作之前创建一个 backup 分支：</p>
<pre><code>$ git branch backup
</code></pre><p>回到正常状况:</p>
<pre><code>$ git checkout -- index.html
$ git merge backup
</code></pre><p>从工作目录中删除未 commit 的更改<br>将 backup 合并到 master（这将导致快进合并并使 master 向上移到和 backup 一样的点）</p>
<pre><code>* 9ec05ca (HEAD -&gt; master) Revert &quot;Set page heading to &quot;Quests &amp; Crusades&quot;&quot;
* db7e87a Set page heading to &quot;Quests &amp; Crusades&quot;
* 796ddb0 Merge branch &apos;heading-update&apos;
</code></pre><p> HEAD 指向 9ec05ca 上的 master。<br> 运行 <code>git reset --mixed HEAD^</code> 会把 commit 9ec05ca 中做出的更改移至工作目录中。<br> 运行 <code>git reset --soft HEAD^</code> 会把 commit 9ec05ca 中做出的更改直接移至暂存区。<br> 运行 <code>git reset --hard HEAD^</code> 将清除 commit 9ec05ca 中做出的更改。</p>
<p>来自 Git 文档的 <a href="https://git-scm.com/docs/git-reset" target="_blank" rel="external">git-reset</a><br>来自 Git Blog 的 <a href="https://git-scm.com/blog" target="_blank" rel="external">Reset Demystified</a><br>来自 Git Book 的<a href="https://git-scm.com/book/en/v2/Git-Tools-Revision-Selection#Ancestry-References" target="_blank" rel="external">祖先引用</a></p>
<h3 id="17-相关-commit-引用"><a href="#17-相关-commit-引用" class="headerlink" title="17. 相关 commit 引用"></a>17. 相关 commit 引用</h3><p>需要引用相对于另一个 commit 的 commit。<br>例如，有时候你需要告诉 git 调用当前 commit 的前一个 commit，或者是前两个 commit。<br>我们可以使用特殊的<strong>“祖先引用”字符</strong>来告诉 git 这些相对引用。这些字符为：</p>
<ul>
<li><code>^</code>  表示父 commit</li>
<li><code>~</code>  表示第一个父 commit</li>
</ul>
<p>我们可以通过以下方式引用之前的 commit：</p>
<ul>
<li>父 commit – 以下内容表示当前 commit 的父 commit<ul>
<li>HEAD^</li>
<li>HEAD~</li>
<li>HEAD~1</li>
</ul>
</li>
<li>祖父 commit – 以下内容表示当前 commit 的祖父 commit<ul>
<li>HEAD^^</li>
<li>HEAD~2</li>
</ul>
</li>
<li>曾祖父 commit – 以下内容表示当前 commit 的曾祖父 commit<ul>
<li>HEAD^^^</li>
<li>HEAD~3</li>
</ul>
</li>
</ul>
<p><code>^</code> 和 <code>~</code> 的区别主要体现在通过合并而创建的 commit 中。<br><code>合并 commit</code> 具有两个父级。对于<code>合并 commit</code>，<code>^</code> 引用用来表示第一个父 commit，而<code>^2</code> 表示第二个父 commit。<br>第一个父 commit 是当你运行 git merge 时所处的分支，而第二个父 commit 是被合并的分支。</p>
<p>我们来看一个示例，这样更好理解。这是我的 git log 当前的显示结果：</p>
<pre><code>* 9ec05ca (HEAD -&gt; master) Revert &quot;Set page heading to &quot;Quests &amp; Crusades&quot;&quot;
* db7e87a Set page heading to &quot;Quests &amp; Crusades&quot;
*   796ddb0 Merge branch &apos;heading-update&apos;
|\  
| * 4c9749e (heading-update) Set page heading to &quot;Crusade&quot;
* | 0c5975a Set page heading to &quot;Quest&quot;
|/  
*   1a56a81 Merge branch &apos;sidebar&apos;
|\  
| * f69811c (sidebar) Update sidebar with favorite movie
| * e6c65a6 Add new sidebar content
* | e014d91 (footer) Add links to social media
* | 209752a Improve site heading for SEO
* | 3772ab1 Set background color for page
|/  
* 5bfe5e7 Add starting HTML structure
* 6fa5f34 Add .gitignore file
* a879849 Add header to blog
* 94de470 Initial commit
</code></pre><p>我们来看看如何引用一些之前的 commit。因为 HEAD 指向 9ec05ca commit：</p>
<pre><code>HEAD^ 是 db7e87a commit
HEAD~1 同样是 db7e87a commit
HEAD^^ 是 796ddb0 commit
HEAD~2 同样是 796ddb0 commit
HEAD^^^ 是 0c5975a commit
HEAD~3 同样是 0c5975a commit
HEAD^^^2 是 4c9749e commit（这是曾祖父的 (HEAD^^) 第二个父 commit (^2))
</code></pre><p>创建一个仓库来记录你的计算机设置 <a href="https://dotfiles.github.io/" target="_blank" rel="external">https://dotfiles.github.io/</a></p>
<h3 id="18-向github上传代码"><a href="#18-向github上传代码" class="headerlink" title="18. 向github上传代码"></a>18. 向github上传代码</h3><pre><code>$ git init

$ git add .

$ git commit -m &quot;&quot;

$ git remote add origin https://github.com/仓库url地址

$ git pull --rebase origin master

$ git push -u origin master
</code></pre>
        </div>
        
<blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2017-12-12T15:30:00.913Z" itemprop="dateUpdated">2017-12-12 23:30:00</time>
</span><br>


        
        转载注明出处，原文地址：<a href="/2016/12/01/git版本控制/" target="_blank" rel="external">https://renkoq.github.io/2016/12/01/git版本控制/</a>
        
    </div>
    <footer>
        <a href="https://renkoq.github.io">
            <img src="/img/avatar.jpg" alt="Renko">
            Renko
        </a>
    </footer>
</blockquote>

        
        
        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/工具/">工具</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://renkoq.github.io/2016/12/01/git版本控制/&title=《git版本控制》 — Renko's blog&pic=https://renkoq.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://renkoq.github.io/2016/12/01/git版本控制/&title=《git版本控制》 — Renko's blog&source=1. 版本控制类型版本控制系统模型包括两大主要类型：

集中式模型 - 所有用户都连接到一个中央的主仓库（master repository）
分布式模型..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《git版本控制》 — Renko's blog&url=https://renkoq.github.io/2016/12/01/git版本控制/&via=https://renkoq.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://renkoq.github.io/2016/12/01/git版本控制/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
            
    <div id="comment"></div>


        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2017/01/01/酸酸乳/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">酸酸乳</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2016/11/10/千里之行，始于足下/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">千里之行，始于足下</h4>
      </a>
    </div>
  
</nav>


    
</article>


</div>

        <footer class="footer">
    
    <div class="bottom">
        <p>
            <span>
                Renko &copy; 2016 - 2018
            </span>
        		
           	
            
            
            <span>
	            Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/codefine/hexo-theme-mellow" target="_blank">mellow</a>
            </span>
            
            
            
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://renkoq.github.io/2016/12/01/git版本控制/&title=《git版本控制》 — Renko's blog&pic=https://renkoq.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://renkoq.github.io/2016/12/01/git版本控制/&title=《git版本控制》 — Renko's blog&source=1. 版本控制类型版本控制系统模型包括两大主要类型：

集中式模型 - 所有用户都连接到一个中央的主仓库（master repository）
分布式模型..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《git版本控制》 — Renko's blog&url=https://renkoq.github.io/2016/12/01/git版本控制/&via=https://renkoq.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://renkoq.github.io/2016/12/01/git版本控制/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACN0lEQVR42u3aS27DMAxF0ex/0+m0QGrlPlIJaup6VCC2rOMBK34eD3w9f11Xv77eub7/9df1UxsuGTJk3JbxXF5XL+DbJfeT9755owwZMg5gkE2sl+ZBM/1Y673JkCFDBmeQg2AtTMuQIUNGbbk1cv1UbWUZMmTIIAc+crxLC3aEsTkXlyFDxg0ZvOr+/b8/0t+QIUPGrRjP8CJhsdaSfDYuGTJkzGbwAJceGfvtzPigKUOGjKEMsnQaNNMUlwfu1otlyJAxgkEe4K3KWgLMBy8uA64MGTLGMfhy6ZFxnZry1DcovcmQIWM0o7Zd3vhMw2jn1CdDhoypDL6VNBynIxSdZFiGDBnnMEjyuat412lI/LErGTJkHMZIw18tWU0/Fiq3yZAhYxwjHYDoJ5+dFeKWgAwZMoYySGCtNSDJhkhQvjwUypAhYyiDH85qm+6U7fhqMmTImM3oJ6g8QH+uzSBDhozZDHLgS1PTtLeYToVcflAZMmQcwEhHvvgBjjcD0oGzDZNrMmTIuCEjPWvVSmakqclDuQwZMs5hpIV7vvU0cKeptQwZMs5hpMV6PqjB09r0KRkyZJzA6KSv/PBXG7kI2gYyZMgYzdgWs0tjGbViXCdky5Ah476MtBCfDl6kAXRD1VCGDBlDGbVGY61g1x8Ii6uGMmTIOJLRb0zy+9HQmAwZMmSEAbeW9PKGxJf+b8iQIeOfMUjCWWsk7CqxvQnHMmTIGM3gqSMJf53t1obDZMiQMZrxA+kaYL7RUzE9AAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="//cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.1.2"></script>

<script type="text/javascript" src="https://cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script type="text/javascript" src="/js/method.js?v=1.1.2"></script>
<script type="text/javascript" src="/js/blog.js?v=1.1.2"></script>

<!-- third-party -->





<script type="text/javascript" src="/js/plugins/local_search.js?v=1.1.2"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



    
        <script type="text/javascript" src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script type="text/javascript" src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script type="text/javascript" src="/js/plugins/valine.js?v=1.1.2"></script>
    



<script type="text/javascript" src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
<script type="text/javascript" src="/js/plugins/leancloud_visitors.js?v=1.1.2"></script>



    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>




    
</body>
</html>
